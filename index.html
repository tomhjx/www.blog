<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">







<script class="next-config" data-name="main" type="application/json">{"hostname":"www.tomhjx.top","root":"/","images":"/images","scheme":"Mist","version":"8.7.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script>
<meta name="description" content="懒人一个">
<meta property="og:type" content="website">
<meta property="og:title" content="疯狂的茶几">
<meta property="og:url" content="https://www.tomhjx.top/index.html">
<meta property="og:site_name" content="疯狂的茶几">
<meta property="og:description" content="懒人一个">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="疯狂的茶几">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.tomhjx.top/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>疯狂的茶几</title>
  



<script data-ad-client="ca-pub-5611057674493702" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <style>@-moz-keyframes next-shake{0%{transform:translate(1pt,1pt) rotate(0)}10%{transform:translate(-1pt,-2pt) rotate(-1deg)}20%{transform:translate(-3pt,0) rotate(1deg)}30%{transform:translate(3pt,2pt) rotate(0)}40%{transform:translate(1pt,-1pt) rotate(1deg)}50%{transform:translate(-1pt,2pt) rotate(-1deg)}60%{transform:translate(-3pt,1pt) rotate(0)}70%{transform:translate(3pt,1pt) rotate(-1deg)}80%{transform:translate(-1pt,-1pt) rotate(1deg)}90%{transform:translate(1pt,2pt) rotate(0)}to{transform:translate(1pt,-2pt) rotate(-1deg)}}@-webkit-keyframes next-shake{0%{transform:translate(1pt,1pt) rotate(0)}10%{transform:translate(-1pt,-2pt) rotate(-1deg)}20%{transform:translate(-3pt,0) rotate(1deg)}30%{transform:translate(3pt,2pt) rotate(0)}40%{transform:translate(1pt,-1pt) rotate(1deg)}50%{transform:translate(-1pt,2pt) rotate(-1deg)}60%{transform:translate(-3pt,1pt) rotate(0)}70%{transform:translate(3pt,1pt) rotate(-1deg)}80%{transform:translate(-1pt,-1pt) rotate(1deg)}90%{transform:translate(1pt,2pt) rotate(0)}to{transform:translate(1pt,-2pt) rotate(-1deg)}}@-o-keyframes next-shake{0%{transform:translate(1pt,1pt) rotate(0)}10%{transform:translate(-1pt,-2pt) rotate(-1deg)}20%{transform:translate(-3pt,0) rotate(1deg)}30%{transform:translate(3pt,2pt) rotate(0)}40%{transform:translate(1pt,-1pt) rotate(1deg)}50%{transform:translate(-1pt,2pt) rotate(-1deg)}60%{transform:translate(-3pt,1pt) rotate(0)}70%{transform:translate(3pt,1pt) rotate(-1deg)}80%{transform:translate(-1pt,-1pt) rotate(1deg)}90%{transform:translate(1pt,2pt) rotate(0)}to{transform:translate(1pt,-2pt) rotate(-1deg)}}@keyframes next-shake{0%{transform:translate(1pt,1pt) rotate(0)}10%{transform:translate(-1pt,-2pt) rotate(-1deg)}20%{transform:translate(-3pt,0) rotate(1deg)}30%{transform:translate(3pt,2pt) rotate(0)}40%{transform:translate(1pt,-1pt) rotate(1deg)}50%{transform:translate(-1pt,2pt) rotate(-1deg)}60%{transform:translate(-3pt,1pt) rotate(0)}70%{transform:translate(3pt,1pt) rotate(-1deg)}80%{transform:translate(-1pt,-1pt) rotate(1deg)}90%{transform:translate(1pt,2pt) rotate(0)}to{transform:translate(1pt,-2pt) rotate(-1deg)}}@-moz-keyframes octocat-wave{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@-webkit-keyframes octocat-wave{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@-o-keyframes octocat-wave{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@keyframes octocat-wave{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@-moz-keyframes icon-animate{0%,to{transform:scale(1)}10%,30%{transform:scale(.9)}20%,40%,50%,60%,70%,80%{transform:scale(1.1)}}@-webkit-keyframes icon-animate{0%,to{transform:scale(1)}10%,30%{transform:scale(.9)}20%,40%,50%,60%,70%,80%{transform:scale(1.1)}}@-o-keyframes icon-animate{0%,to{transform:scale(1)}10%,30%{transform:scale(.9)}20%,40%,50%,60%,70%,80%{transform:scale(1.1)}}@keyframes icon-animate{0%,to{transform:scale(1)}10%,30%{transform:scale(.9)}20%,40%,50%,60%,70%,80%{transform:scale(1.1)}}@-moz-keyframes next-roll{0%{transform:rotateZ(30deg)}to{transform:rotateZ(-30deg)}}@-webkit-keyframes next-roll{0%{transform:rotateZ(30deg)}to{transform:rotateZ(-30deg)}}@-o-keyframes next-roll{0%{transform:rotateZ(30deg)}to{transform:rotateZ(-30deg)}}@keyframes next-roll{0%{transform:rotateZ(30deg)}to{transform:rotateZ(-30deg)}}@-moz-keyframes dot-flash{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@-webkit-keyframes dot-flash{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@-o-keyframes dot-flash{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes dot-flash{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}:root{--body-bg-color:#fff;--content-bg-color:#f5f5f5;--card-bg-color:#f5f5f5;--text-color:#555;--blockquote-color:#666;--link-color:#555;--link-hover-color:#222;--brand-color:#222;--brand-hover-color:#222;--table-row-odd-bg-color:#f9f9f9;--table-row-hover-bg-color:#f5f5f5;--menu-item-bg-color:#ddd;--btn-default-bg:transparent;--btn-default-color:var(--link-color);--btn-default-border-color:var(--link-color);--btn-default-hover-bg:transparent;--btn-default-hover-color:var(--link-hover-color);--btn-default-hover-border-color:var(--link-hover-color);--highlight-background:#f0f0f0;--highlight-foreground:#444;--highlight-gutter-background:#dedede;--highlight-gutter-foreground:#555}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}details,main{display:block}hr{box-sizing:content-box;overflow:visible;background-image:repeating-linear-gradient(-45deg,#ddd,#ddd 4px,transparent 4px,transparent 8px);border:0;height:2px;margin:20px 0}kbd,pre,samp{font-size:1em}samp{font-family:monospace,monospace}a{background:0 0;border-bottom:1px solid #ccc;color:var(--link-color);cursor:pointer;outline:0;text-decoration:none;overflow-wrap:break-word}abbr[title]{border-bottom:none;text-decoration:underline dotted}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{color:inherit;display:table;max-width:100%;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio],legend{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}summary{display:list-item}[hidden],template{display:none}::selection{background:#262a30;color:#eee}body,html{height:100%}body,h1,h2,h3,h4,h5,h6{font-family:Lato,'PingFang SC','Microsoft YaHei',sans-serif}body{background:var(--body-bg-color);color:var(--text-color);line-height:2;min-height:100%;position:relative;transition:padding .2s ease-in-out}h1,h2,h3,h4,h5,h6{font-weight:700;line-height:1.5;margin:30px 0 15px}h1{font-size:1.5em}h2{font-size:1.375em}h3{font-size:1.25em}h4{font-size:1.125em}body,h5{font-size:1em}h6{font-size:.875em}p,table{margin:0 0 20px}a:hover{border-bottom-color:var(--link-hover-color);color:var(--link-hover-color)}embed,iframe,img,video{display:block;margin-left:auto;margin-right:auto;max-width:100%}blockquote{border-left:4px solid #ddd;color:var(--blockquote-color);margin:0;padding:0 15px}blockquote cite::before{content:'-';padding:0 5px}dt{font-weight:700}dd{margin:0;padding:0}.table-container{overflow:auto}table{border-collapse:collapse;border-spacing:0;font-size:.875em;width:100%}tbody tr:nth-of-type(odd){background:var(--table-row-odd-bg-color)}tbody tr:hover{background:var(--table-row-hover-bg-color)}caption,td,th{padding:8px}td,th{border:1px solid #ddd;border-bottom:3px solid #ddd}th{font-weight:700;padding-bottom:10px}td{border-bottom-width:1px}.btn{background:var(--btn-default-bg);border:2px solid var(--btn-default-border-color);border-radius:0;color:var(--btn-default-color);display:inline-block;font-size:.875em;line-height:2;transition:background-color .2s ease-in-out}.btn:hover{background:var(--btn-default-hover-bg);border-color:var(--btn-default-hover-border-color);color:var(--btn-default-hover-color)}.btn+.btn{margin:0 0 8px 8px}.btn .fa-fw{text-align:left;width:1.285714285714286em}.toggle{line-height:0}.toggle .toggle-line{background:#fff;display:block;height:2px;left:0;position:relative;top:0;transition:all .4s;width:100%}.toggle .toggle-line:not(:first-child){margin-top:3px}.toggle.toggle-arrow .toggle-line:first-child{left:50%;top:2px;transform:rotate(45deg);width:50%}.toggle.toggle-arrow .toggle-line:last-child{left:50%;top:-2px;transform:rotate(-45deg);width:50%}.toggle.toggle-close .toggle-line:nth-child(2){opacity:0}.toggle.toggle-close .toggle-line:first-child{top:5px;transform:rotate(45deg)}.toggle.toggle-close .toggle-line:last-child{top:-5px;transform:rotate(-45deg)}code,figure.highlight,kbd,pre{background:var(--highlight-background);color:var(--highlight-foreground)}figure.highlight,pre{line-height:1.6;margin:0 auto 20px}code,pre{font-family:consolas,Menlo,monospace,'PingFang SC','Microsoft YaHei'}code{border-radius:3px;font-size:.875em;padding:2px 4px;overflow-wrap:break-word}kbd{border:2px solid #ccc;border-radius:.2em;box-shadow:.1em .1em .2em rgba(0,0,0,.1);font-family:inherit;padding:.1em .3em;white-space:nowrap}figure.highlight,pre{position:relative}figure.highlight pre{border:0;margin:0;padding:10px 0}figure.highlight table{border:0;margin:0;width:auto}figure.highlight td{border:0;padding:0}figure.highlight figcaption,pre .caption,pre figcaption{background:var(--highlight-gutter-background);color:var(--highlight-foreground);display:flow-root;font-size:.875em;line-height:1.2;padding:.5em}figure.highlight figcaption a,pre .caption a,pre figcaption a{color:var(--highlight-foreground);float:right}figure.highlight figcaption a:hover,pre .caption a:hover,pre figcaption a:hover{border-bottom-color:var(--highlight-foreground)}figure.highlight .gutter{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none}figure.highlight .gutter pre{background:var(--highlight-gutter-background);color:var(--highlight-gutter-foreground);padding-left:10px;padding-right:10px;text-align:right}figure.highlight .code pre{padding-left:10px;width:100%}pre .caption,pre figcaption{margin-bottom:10px}.gist table{width:auto}.gist table td{border:0}pre{overflow:auto;padding:10px}pre code{background:0 0;padding:0;text-shadow:none}.blockquote-center{border-left:none;margin:40px 0;padding:0;position:relative;text-align:center}.blockquote-center::after,.blockquote-center::before{left:0;line-height:1;opacity:.6;position:absolute;width:100%}.blockquote-center::before{border-top:1px solid #ccc;text-align:left;top:-20px;content:'\f10d';font-family:'Font Awesome 5 Free';font-weight:900}.blockquote-center::after{border-bottom:1px solid #ccc;bottom:-20px;text-align:right;content:'\f10e';font-family:'Font Awesome 5 Free';font-weight:900}.blockquote-center div,.blockquote-center p{text-align:center}.group-picture{margin-bottom:20px}.group-picture .group-picture-row{display:flex;gap:3px;margin-bottom:3px}.group-picture .group-picture-column{flex:1}.group-picture .group-picture-column img{height:100%;margin:0;object-fit:cover;width:100%}.post-body .label{color:#555;padding:0 2px}.post-body .label.default{background:#f0f0f0}.post-body .label.primary{background:#efe6f7}.post-body .label.info{background:#e5f2f8}.post-body .label.success{background:#e7f4e9}.post-body .label.warning{background:#fcf6e1}.post-body .label.danger{background:#fae8eb}.post-body .link-grid{display:grid;grid-gap:1.5rem 1.5rem;gap:1.5rem 1.5rem;grid-template-columns:1fr 1fr;margin-bottom:20px;padding:1rem}@media (max-width:767px){.post-body .link-grid{grid-template-columns:1fr}}.post-body .link-grid .link-grid-container{border:solid #ddd;box-shadow:1rem 1rem .5rem rgba(0,0,0,.5);min-height:5rem;min-width:0;padding:.5rem;position:relative;transition:background .3s}.post-body .link-grid .link-grid-container:hover{animation:next-shake .5s;background:var(--card-bg-color)}.post-body .link-grid .link-grid-container:active{box-shadow:.5rem .5rem .25rem rgba(0,0,0,.5);transform:translate(.2rem,.2rem)}.post-body .link-grid .link-grid-container .link-grid-image{border:1px solid #ddd;border-radius:50%;box-sizing:border-box;height:5rem;padding:3px;position:absolute;width:5rem}.post-body .link-grid .link-grid-container p{margin:0 1rem 0 6rem}.post-body .link-grid .link-grid-container p:first-of-type{font-size:1.2em}.post-body .link-grid .link-grid-container p:last-of-type{font-size:.8em;line-height:1.3rem;opacity:.7}.post-body .link-grid .link-grid-container a{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.post-body .tabs{margin-bottom:20px;padding-top:10px}.post-body .tabs ul.nav-tabs,.tabs-comment ul.nav-tabs{display:flex;flex-wrap:wrap;justify-content:center;margin:0;padding:0}@media (max-width:413px){.post-body .tabs ul.nav-tabs,.tabs-comment ul.nav-tabs{display:block;margin-bottom:5px}}.post-body .tabs ul.nav-tabs li.tab,.tabs-comment ul.nav-tabs li.tab{border-bottom:1px solid #ddd;border-left:1px solid transparent;border-right:1px solid transparent;border-radius:0 0 0 0;border-top:3px solid transparent;flex-grow:1;list-style-type:none}@media (max-width:413px){.post-body .tabs ul.nav-tabs li.tab,.tabs-comment ul.nav-tabs li.tab{border-bottom:1px solid transparent;border-left:3px solid transparent;border-right:1px solid transparent;border-top:1px solid transparent;border-radius:0}}.post-body .tabs ul.nav-tabs li.tab a,.tabs-comment ul.nav-tabs li.tab a{border-bottom:initial;display:block;line-height:1.8;padding:.25em .75em;text-align:center;transition:all .2s ease-out}.post-body .tabs ul.nav-tabs li.tab a i,.tabs-comment ul.nav-tabs li.tab a i{width:1.285714285714286em}.post-body .tabs ul.nav-tabs li.tab.active,.tabs-comment ul.nav-tabs li.tab.active{border-color:#fc6423 #ddd transparent}@media (max-width:413px){.post-body .tabs ul.nav-tabs li.tab.active,.tabs-comment ul.nav-tabs li.tab.active{border-color:#ddd #ddd #ddd #fc6423}}.post-body .tabs ul.nav-tabs li.tab.active a,.tabs-comment ul.nav-tabs li.tab.active a{cursor:default}.post-body .tabs .tab-content,.tabs-comment .tab-content{border:1px solid #ddd;border-radius:0 0 0 0;border-top-color:transparent}@media (max-width:413px){.post-body .tabs .tab-content,.tabs-comment .tab-content{border-radius:0;border-top-color:#ddd}}.post-body .tabs .tab-content .tab-pane,.tabs-comment .tab-content .tab-pane{padding:20px 20px 0}.post-body .tabs .tab-content .tab-pane:not(.active),.tabs-comment .tab-content .tab-pane:not(.active){display:none}.post-body .note{border-radius:3px;margin-bottom:20px;padding:1em;position:relative;border:1px solid #eee;border-left-width:5px}.post-body .note summary{cursor:pointer;outline:0}.post-body .note summary p{display:inline}.post-body .note h2,.post-body .note h3,.post-body .note h4,.post-body .note h5,.post-body .note h6{border-bottom:initial;margin:0;padding-top:0}.post-body .note blockquote:first-child,.post-body .note img:first-child,.post-body .note ol:first-child,.post-body .note p:first-child,.post-body .note pre:first-child,.post-body .note table:first-child,.post-body .note ul:first-child{margin-top:0}.post-body .note blockquote:last-child,.post-body .note img:last-child,.post-body .note ol:last-child,.post-body .note p:last-child,.post-body .note pre:last-child,.post-body .note table:last-child,.post-body .note ul:last-child{margin-bottom:0}.post-body .note.default{border-left-color:#777}.post-body .note.default h2,.post-body .note.default h3,.post-body .note.default h4,.post-body .note.default h5,.post-body .note.default h6{color:#777}.post-body .note.primary{border-left-color:#6f42c1}.post-body .note.primary h2,.post-body .note.primary h3,.post-body .note.primary h4,.post-body .note.primary h5,.post-body .note.primary h6{color:#6f42c1}.post-body .note.info{border-left-color:#428bca}.post-body .note.info h2,.post-body .note.info h3,.post-body .note.info h4,.post-body .note.info h5,.post-body .note.info h6{color:#428bca}.post-body .note.success{border-left-color:#5cb85c}.post-body .note.success h2,.post-body .note.success h3,.post-body .note.success h4,.post-body .note.success h5,.post-body .note.success h6{color:#5cb85c}.post-body .note.warning{border-left-color:#f0ad4e}.post-body .note.warning h2,.post-body .note.warning h3,.post-body .note.warning h4,.post-body .note.warning h5,.post-body .note.warning h6{color:#f0ad4e}.post-body .note.danger{border-left-color:#d9534f}.post-body .note.danger h2,.post-body .note.danger h3,.post-body .note.danger h4,.post-body .note.danger h5,.post-body .note.danger h6{color:#d9534f}.mermaid{margin-bottom:20px;text-align:center}.pagination .next,.pagination .page-number,.pagination .prev{display:inline-block;margin:-1px 10px 0;padding:0 10px}.pagination .space{display:inline-block}@media (max-width:767px){.pagination .next,.pagination .page-number,.pagination .prev,.pagination .space{margin:0 5px}}.pagination{border-top:1px solid #eee;margin:120px 0 0}.pagination .next,.pagination .page-number,.pagination .prev{border-bottom:0;border-top:1px solid #eee;transition:border-color .2s ease-in-out}.pagination .next:hover,.pagination .page-number:hover,.pagination .prev:hover{border-top-color:var(--link-hover-color)}@media (max-width:767px){.pagination{border-top:0}.pagination .next,.pagination .page-number,.pagination .prev{border-bottom:1px solid #eee;border-top:0}.pagination .next:hover,.pagination .page-number:hover,.pagination .prev:hover{border-bottom-color:var(--link-hover-color)}}.pagination .space{margin:0;padding:0}.pagination .page-number.current{background:#ccc;border-color:#ccc;color:var(--content-bg-color)}.comments{margin-top:60px;overflow:hidden}.comment-button-group{display:flex;flex-wrap:wrap;justify-content:center;margin:1em 0}.comment-button-group .comment-button{margin:.1em .2em}.comment-button-group .comment-button.active{background:var(--btn-default-hover-bg);border-color:var(--btn-default-hover-border-color);color:var(--btn-default-hover-color)}.comment-position{display:none}.comment-position.active,.menu-item a{display:block}.tabs-comment{margin-top:4em;padding-top:0}.tabs-comment .comments{margin-top:0;padding-top:0}.headband{background:#222;height:3px}@media (max-width:991px){.headband{display:none}}.header{background:var(--content-bg-color)}.header-inner{margin:0 auto;width:700px}@media (min-width:1200px){.header-inner{width:800px}}@media (min-width:1600px){.header-inner{width:900px}}.site-brand-container{display:flex;flex-shrink:0;padding:0 10px}.use-motion .header,.use-motion .site-brand-container .toggle{opacity:0}.site-meta{flex-grow:1;text-align:center}@media (max-width:767px){.site-meta{text-align:center}}.custom-logo-image{margin-top:20px}@media (max-width:991px){.custom-logo-image{display:none}}.brand{border-bottom:0;color:var(--brand-color);display:inline-block;padding:0 40px}.brand:hover{color:var(--brand-hover-color)}.site-title{font-family:Lato,'PingFang SC','Microsoft YaHei',sans-serif;font-size:1.375em;font-weight:400;margin:0}.site-subtitle{color:#999;font-size:.8125em;margin:10px 0}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:0;position:relative;top:-10px}.site-nav-right,.site-nav-toggle{display:none}@media (max-width:767px){.site-nav-right,.site-nav-toggle{display:flex;flex-direction:column;justify-content:center}}.site-nav-right .toggle,.site-nav-toggle .toggle{color:var(--text-color);padding:10px;width:22px}.site-nav-right .toggle .toggle-line,.site-nav-toggle .toggle .toggle-line{background:var(--text-color);border-radius:1px}@media (max-width:767px){.site-nav{--scroll-height:0;height:0;overflow:hidden;transition:height .2s ease-in-out}body:not(.site-nav-on) .site-nav .animated{animation:none}body.site-nav-on .site-nav{height:var(--scroll-height)}}.menu{margin:0;text-align:center}.menu-item{display:inline-block;list-style:none;margin:0 10px}@media (max-width:767px){.menu-item{display:block;margin-top:10px}.menu-item.menu-item-search{display:none}}.menu-item a{border-bottom:0;font-size:.8125em;transition:border-color .2s ease-in-out}.menu-item a.menu-item-active,.menu-item a:hover{background:var(--menu-item-bg-color)}.menu-item .fa,.menu-item .fab,.menu-item .far,.menu-item .fas{margin-right:8px}.menu-item .badge{display:inline-block;font-weight:700;line-height:1;margin-left:.35em;margin-top:.35em;text-align:center;white-space:nowrap}@media (max-width:767px){.menu-item .badge{float:right;margin-left:0}}.use-motion .menu-item{visibility:hidden}.github-corner :hover .octo-arm{animation:octocat-wave 560ms ease-in-out}.github-corner svg{color:#fff;fill:#222;position:absolute;right:0;top:0;z-index:1000}@media (max-width:991px){.github-corner{display:none}.github-corner .github-corner:hover .octo-arm{animation:none}.github-corner .github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}@media (max-width:767px){.github-corner svg{top:inherit}}.sidebar-inner{color:#999;padding:18px 10px;text-align:center}.site-overview{max-height:var(--sidebar-wrapper-height)}.site-overview-item:not(:first-child){margin-top:10px}.cc-license .cc-opacity{border-bottom:0;opacity:.7}.cc-license .cc-opacity:hover{opacity:.9}.cc-license img,.post-reward div{display:inline-block}.site-author-image{border:2px solid #333;max-width:96px;padding:2px}.site-author-name{color:#f5f5f5;font-weight:400;margin:5px 0 0}.site-description{color:#999;font-size:1em;margin-top:5px}.links-of-author a,.links-of-blogroll{font-size:.8125em}.links-of-author .fa,.links-of-author .fab,.links-of-author .far,.links-of-author .fas{margin-right:2px}.sidebar .sidebar-button:not(:first-child){margin-top:15px}.sidebar .sidebar-button button{background:0 0;color:#fc6423;cursor:pointer;line-height:2;padding:0 15px;border:1px solid #fc6423;border-radius:4px}.sidebar .sidebar-button button:hover{background:#fc6423;color:#fff}.sidebar .sidebar-button button .fa,.sidebar .sidebar-button button .fab,.sidebar .sidebar-button button .far,.sidebar .sidebar-button button .fas{margin-right:5px}.links-of-blogroll-title{font-size:.875em;font-weight:600;margin-top:0}.links-of-blogroll-list{list-style:none;margin:0;padding:0}.sidebar-dimmer{display:none}@media (max-width:991px){.sidebar-dimmer{background:#000;display:block;height:100%;left:0;opacity:0;position:fixed;top:0;transition:visibility .4s,opacity .4s;visibility:hidden;width:100%;z-index:1100}.sidebar-active .sidebar-dimmer{opacity:.7;visibility:visible}}.sidebar-nav{display:none;margin:0;padding-bottom:20px;padding-left:0}.sidebar-nav-active .sidebar-nav{display:block}.sidebar-nav li{border-bottom:1px solid transparent;color:#666;cursor:pointer;display:inline-block;font-size:.875em}.sidebar-nav li.sidebar-nav-overview{margin-left:10px}.sidebar-nav li:hover{color:#f5f5f5}.post-toc .nav .active>a,.sidebar-overview-active .sidebar-nav-overview,.sidebar-toc-active .sidebar-nav-toc{border-bottom-color:#87daff;color:#87daff}.post-toc .nav .active-current>a,.post-toc .nav .active-current>a:hover,.sidebar-overview-active .sidebar-nav-overview:hover,.sidebar-toc-active .sidebar-nav-toc:hover{color:#87daff}.sidebar-panel-container{max-height:var(--sidebar-wrapper-height);overflow-x:hidden;overflow-y:auto}.sidebar-panel{display:none}.sidebar-overview-active .site-overview-wrap{display:flex;flex-direction:column;justify-content:center}.sidebar-toc-active .post-toc-wrap{display:block}.sidebar-toggle{bottom:45px;height:12px;padding:6px 5px;width:14px;background:#222;cursor:pointer;opacity:.8;position:fixed;z-index:1300;left:30px}@media (max-width:991px){.sidebar-toggle{left:20px}}.sidebar-toggle:hover{opacity:1}@media (max-width:991px){.sidebar-toggle{opacity:1}}.sidebar-toggle:hover .toggle-line{background:#87daff}@media (any-hover:hover){body:not(.sidebar-active) .sidebar-toggle:hover .toggle-line:first-child{left:50%;top:2px;transform:rotate(45deg);width:50%}body:not(.sidebar-active) .sidebar-toggle:hover .toggle-line:last-child{left:50%;top:-2px;transform:rotate(-45deg);width:50%}}.sidebar-active .sidebar-toggle .toggle-line:nth-child(2){opacity:0}.sidebar-active .sidebar-toggle .toggle-line:first-child{top:5px;transform:rotate(45deg)}.sidebar-active .sidebar-toggle .toggle-line:last-child{top:-5px;transform:rotate(-45deg)}.post-toc{font-size:.875em}.post-toc ol{list-style:none;margin:0;padding:0 2px 5px 10px;text-align:left}.post-toc ol>ol{padding-left:0}.post-toc ol a{transition:all .2s ease-in-out}.post-toc .nav-item{line-height:1.8;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.back-to-top span,.post-toc .nav .nav-child{display:none}.post-toc .nav .active-current>.nav-child,.post-toc .nav .active-current>.nav-child>.nav-item,.post-toc .nav .active>.nav-child{display:block}.site-state{display:flex;flex-wrap:wrap;justify-content:center;line-height:1.4}.site-state-item{padding:0 15px}.site-state-item a{border-bottom:0;display:block}.site-state-item-count{display:block;font-size:1.25em;font-weight:600}.footer,.site-state-item-name{color:inherit;font-size:.875em}.footer{color:#999}.footer.footer-fixed{bottom:0;left:0;position:absolute;right:0}.footer-inner{box-sizing:border-box;display:flex;flex-direction:column;justify-content:center;margin:0 auto;width:700px}@media (min-width:1200px){.footer-inner{width:800px}}@media (min-width:1600px){.footer-inner{width:900px}}.use-motion .footer{opacity:0}.languages{display:inline-block;font-size:1.125em;position:relative}.languages .lang-select-label span{margin:0 .5em}.languages .lang-select{height:100%;left:0;opacity:0;position:absolute;top:0;width:100%}.with-love{color:gray;display:inline-block;margin:0 5px}.back-to-top{font-size:12px;bottom:-100px;box-sizing:border-box;color:#fff;padding:0 6px;transition:bottom .2s ease-in-out;background:#222;cursor:pointer;opacity:.8;position:fixed;z-index:1300;left:30px;width:24px}@media (max-width:991px){.back-to-top{left:20px}}.back-to-top:hover{opacity:1;color:#87daff}@media (max-width:991px){.back-to-top{opacity:1}}.back-to-top.back-to-top-on{bottom:19px}.noscript-warning{background-color:#f55;color:#fff;font-family:sans-serif;font-size:1rem;font-weight:700;left:0;position:fixed;text-align:center;top:0;width:100%;z-index:1500}.rtl.post-body a,.rtl.post-body h1,.rtl.post-body h2,.rtl.post-body h3,.rtl.post-body h4,.rtl.post-body h5,.rtl.post-body h6,.rtl.post-body li,.rtl.post-body ol,.rtl.post-body p,.rtl.post-body ul{direction:rtl;font-family:UKIJ Ekran}.rtl.post-title{font-family:UKIJ Ekran}.use-motion .collection-header,.use-motion .comments,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{visibility:hidden}.posts-collapse .post-content{margin-bottom:35px;margin-left:35px;position:relative}@media (max-width:767px){.posts-collapse .post-content{margin-left:0;margin-right:0}}.posts-collapse .post-content .collection-title{font-size:1.125em;position:relative}.posts-collapse .post-content .collection-title::before{background:#999;border:1px solid #fff;margin-left:-6px;margin-top:-4px;position:absolute;top:50%;border-radius:50%;content:' ';height:10px;width:10px}.posts-collapse .post-content .collection-year{font-size:1.5em;font-weight:700;margin:60px 0;position:relative}.posts-collapse .post-content .collection-year::before{background:#bbb;margin-left:-4px;margin-top:-4px;position:absolute;top:50%;border-radius:50%;content:' ';height:8px;width:8px}.posts-collapse .post-content .collection-header{display:block;margin-left:20px}.posts-collapse .post-content .collection-header small{color:#bbb;margin-left:5px}.posts-collapse .post-content .post-header{border-bottom:1px dashed #ccc;margin:30px 2px 0;padding-left:15px;position:relative;transition:border .2s ease-in-out}.posts-collapse .post-content .post-header::before{background:#bbb;border:1px solid #fff;left:-6px;position:absolute;top:.75em;transition:background .2s ease-in-out;border-radius:50%;content:' ';height:6px;width:6px}.posts-collapse .post-content .post-header:hover{border-bottom-color:#666}.posts-collapse .post-content .post-header:hover::before{background:#222}.posts-collapse .post-content .post-meta-container{display:inline;font-size:.75em;margin-right:10px}.posts-collapse .post-content .post-title,ul.breadcrumb li{display:inline}.posts-collapse .post-content .post-title a{border-bottom:0;color:var(--link-color)}.posts-collapse .post-content .post-title .fa-external-link-alt{font-size:.875em;margin-left:5px}.posts-collapse .post-content::before{background:#f5f5f5;content:' ';height:100%;margin-left:-2px;position:absolute;top:1.25em;width:4px}.post-body{font-family:Lato,'PingFang SC','Microsoft YaHei',sans-serif;overflow-wrap:break-word}@media (min-width:1200px){.post-body{font-size:1.125em}}@media (min-width:992px){.post-body{text-align:justify}}@media (max-width:991px){.post-body{text-align:justify}}.post-body h1 .header-anchor,.post-body h1 .headerlink,.post-body h2 .header-anchor,.post-body h2 .headerlink,.post-body h3 .header-anchor,.post-body h3 .headerlink,.post-body h4 .header-anchor,.post-body h4 .headerlink,.post-body h5 .header-anchor,.post-body h5 .headerlink,.post-body h6 .header-anchor,.post-body h6 .headerlink{border-bottom-style:none;color:inherit;float:right;font-size:.875em;margin-left:10px;opacity:0}.post-body h1 .header-anchor::before,.post-body h1 .headerlink::before,.post-body h2 .header-anchor::before,.post-body h2 .headerlink::before,.post-body h3 .header-anchor::before,.post-body h3 .headerlink::before,.post-body h4 .header-anchor::before,.post-body h4 .headerlink::before,.post-body h5 .header-anchor::before,.post-body h5 .headerlink::before,.post-body h6 .header-anchor::before,.post-body h6 .headerlink::before{content:'\f0c1';font-family:'Font Awesome 5 Free';font-weight:900}.post-body h1:hover .header-anchor,.post-body h1:hover .headerlink,.post-body h2:hover .header-anchor,.post-body h2:hover .headerlink,.post-body h3:hover .header-anchor,.post-body h3:hover .headerlink,.post-body h4:hover .header-anchor,.post-body h4:hover .headerlink,.post-body h5:hover .header-anchor,.post-body h5:hover .headerlink,.post-body h6:hover .header-anchor,.post-body h6:hover .headerlink{opacity:.5}.post-body h1:hover .header-anchor:hover,.post-body h1:hover .headerlink:hover,.post-body h2:hover .header-anchor:hover,.post-body h2:hover .headerlink:hover,.post-body h3:hover .header-anchor:hover,.post-body h3:hover .headerlink:hover,.post-body h4:hover .header-anchor:hover,.post-body h4:hover .headerlink:hover,.post-body h5:hover .header-anchor:hover,.post-body h5:hover .headerlink:hover,.post-body h6:hover .header-anchor:hover,.post-body h6:hover .headerlink:hover{opacity:1}.post-body .exturl .fa{font-size:.875em;margin-left:4px}.post-body .figure .caption,.post-body .image-caption{color:#999;font-size:.875em;font-weight:700;line-height:1;margin:-20px auto 15px;text-align:center}.post-body embed,.post-body iframe,.post-body img,.post-body video{margin-bottom:20px}.post-body .video-container{height:0;margin-bottom:20px;overflow:hidden;padding-top:75%;position:relative;width:100%}.post-body .video-container embed,.post-body .video-container iframe,.post-body .video-container object{height:100%;left:0;margin:0;position:absolute;top:0;width:100%}.post-gallery{display:flex;min-height:200px}.post-gallery .post-gallery-image{flex:1}.post-gallery .post-gallery-image:not(:first-child){clip-path:polygon(40px 0,100% 0,100% 100%,0 100%);margin-left:-20px}.post-gallery .post-gallery-image:not(:last-child){margin-right:-20px}.post-gallery .post-gallery-image img{height:100%;object-fit:cover;opacity:1;width:100%}.posts-expand .post-gallery{margin-bottom:60px}.posts-collapse .post-gallery{margin:15px 0}.posts-expand .post-header{font-size:1.125em;text-align:center}.posts-expand .post-title{font-size:1.5em;font-weight:400;margin:initial;overflow-wrap:break-word}.posts-expand .post-title-link{border-bottom:0;color:var(--link-color);display:inline-block;position:relative}.posts-expand .post-title-link::before{background:var(--link-color);bottom:0;content:'';height:2px;left:0;position:absolute;transform:scaleX(0);transition:transform .2s ease-in-out;width:100%}.posts-expand .post-title-link:hover::before{transform:scaleX(1)}.posts-expand .post-title-link .fa-external-link-alt{font-size:.875em;margin-left:5px}.post-sticky-flag{display:inline-block;margin-right:8px;transform:rotate(30deg)}.posts-expand .post-meta-container{color:#999;font-family:Lato,'PingFang SC','Microsoft YaHei',sans-serif;font-size:.75em;margin-top:3px}.posts-expand .post-meta-container .post-description{font-size:.875em;margin-top:2px}.posts-expand .post-meta-container time{border-bottom:1px dashed #999;cursor:pointer}.post-meta{display:flex;flex-wrap:wrap;justify-content:center}:not(.post-meta-break)+.post-meta-item::before{content:'|';margin:0 .5em}.post-meta-item-icon{margin-right:3px}@media (max-width:991px){.post-meta-item-text{display:none}}.post-meta-break{flex-basis:100%;height:0}.post-nav{border-top:1px solid #eee;display:flex;gap:30px;justify-content:space-between;margin-top:1em;padding:10px 5px 0}.post-nav-item{flex:1}.post-nav-item a{border-bottom:0;display:block;font-size:.875em;line-height:1.6}.post-nav-item a:active{top:2px}.post-nav-item .fa{font-size:.75em}.post-nav-item:first-child .fa{margin-right:5px}.post-nav-item:last-child{text-align:right}.post-nav-item:last-child .fa{margin-left:5px}.post-footer{display:flex;flex-direction:column;justify-content:center}.post-eof{background:#ccc;height:1px;margin:80px auto 60px;width:8%}.post-block:last-of-type .post-eof{display:none}.post-tags{margin-top:40px;text-align:center}.post-tags a{display:inline-block;font-size:.8125em}.post-tags a:not(:last-child){margin-right:10px}.post-widgets{border-top:1px solid #eee;margin-top:15px;text-align:center}.wp_rating{height:20px;line-height:20px;margin-top:10px;padding-top:6px;text-align:center}.social-like{display:flex;font-size:.875em;justify-content:center;text-align:center}.reward-container{margin:1em 0 0;padding:1em 0;text-align:center}.reward-container button{background:0 0;color:#87daff;cursor:pointer;line-height:2;padding:0 15px;border:2px solid #87daff;border-radius:2px;outline:0;transition:all .2s ease-in-out;vertical-align:text-top}.reward-container button:hover{background:#87daff;color:#fff}.post-reward{display:none;padding-top:20px}.post-reward div span,.post-reward.active{display:block}.post-reward img{display:inline-block;margin:.8em 2em 0;max-width:100%;width:180px}.category-all-page .category-all-title,.tag-cloud{text-align:center}.category-all-page .category-all{margin-top:20px}.category-all-page .category-list{list-style:none;margin:0;padding:0}.category-all-page .category-list-item{margin:5px 10px}.category-all-page .category-list-count{color:#bbb}.category-all-page .category-list-count::before{content:' ('}.category-all-page .category-list-count::after{content:') '}.category-all-page .category-list-child{padding-left:10px}.event-list hr{background:#222;margin:20px 0 45px}.event-list hr::after{background:#222;color:#fff;content:'NOW';display:inline-block;font-weight:700;padding:0 5px}.event-list .event{--event-background:#222;--event-foreground:#bbb;--event-title:#fff;background:var(--event-background);padding:15px}.event-list .event .event-summary{border-bottom:0;color:var(--event-title);margin:0;padding:0 0 0 35px;position:relative}.event-list .event .event-summary::before{animation:dot-flash 1s alternate infinite ease-in-out;background:var(--event-title);left:0;margin-top:-6px;position:absolute;top:50%;border-radius:50%;content:' ';height:12px;width:12px}.event-list .event:nth-of-type(odd) .event-summary::before{animation-delay:.5s}.event-list .event:not(:last-child){margin-bottom:20px}.event-list .event .event-relative-time{color:var(--event-foreground);display:inline-block;font-size:12px;font-weight:400;padding-left:12px}.event-list .event .event-details{color:var(--event-foreground);display:block;line-height:18px;padding:6px 0 6px 35px}.event-list .event .event-details::before{color:var(--event-foreground);display:inline-block;margin-right:9px;width:14px;font-family:'Font Awesome 5 Free';font-weight:900}.event-list .event .event-details.event-location::before{content:'\f041'}.event-list .event .event-details.event-duration::before{content:'\f017'}.event-list .event .event-details.event-description::before{content:'\f024'}.event-list .event-past{--event-background:#f5f5f5;--event-foreground:#999;--event-title:#222}ul.breadcrumb{font-size:.75em;list-style:none;margin:1em 0;padding:0 2em;text-align:center}ul.breadcrumb li:not(:first-child)::before{content:'/\00a0';font-weight:400;padding:.5em}ul.breadcrumb li:last-child{font-weight:700}.tag-cloud a{display:inline-block;margin:10px}.tag-cloud-0{border-bottom-color:#aaa;color:#aaa}.tag-cloud-1{border-bottom-color:#9a9a9a;color:#9a9a9a}.tag-cloud-2{border-bottom-color:#8b8b8b;color:#8b8b8b}.tag-cloud-3{border-bottom-color:#7c7c7c;color:#7c7c7c}.tag-cloud-4{border-bottom-color:#6c6c6c;color:#6c6c6c}.tag-cloud-5{border-bottom-color:#5d5d5d;color:#5d5d5d}.tag-cloud-6{border-bottom-color:#4e4e4e;color:#4e4e4e}.tag-cloud-7{border-bottom-color:#3e3e3e;color:#3e3e3e}.tag-cloud-8{border-bottom-color:#2f2f2f;color:#2f2f2f}.tag-cloud-9{border-bottom-color:#202020;color:#202020}.tag-cloud-10{border-bottom-color:#111;color:#111}.search-active{overflow:hidden}.search-pop-overlay{background:0 0;display:flex;height:100%;left:0;position:fixed;top:0;transition:visibility .4s,background .4s;visibility:hidden;width:100%;z-index:1400}.search-active .search-pop-overlay{background:rgba(0,0,0,.3);visibility:visible}.search-popup{background:var(--card-bg-color);border-radius:5px;height:80%;margin:auto;transform:scale(0);transition:transform .4s;width:700px}.search-active .search-popup{transform:scale(1)}@media (max-width:767px){.search-popup{border-radius:0;height:100%;width:100%}}.search-popup .popup-btn-close,.search-popup .search-icon{color:#999;font-size:18px;padding:0 10px}.search-popup .popup-btn-close{cursor:pointer}.search-popup .popup-btn-close:hover .fa{color:#222}.search-popup .search-header{background:#eee;border-top-left-radius:5px;border-top-right-radius:5px;display:flex;padding:5px}.search-popup input.search-input{background:0 0;border:0;outline:0;width:100%}.search-popup input.search-input::-webkit-search-cancel-button{display:none}.search-popup .search-result-container{height:calc(100% - 55px);overflow:auto;padding:5px 25px}.search-popup .search-result-container hr{margin:5px 0 10px}.search-popup .search-result-container hr:first-child{display:none}.search-popup .search-result-list{margin:0 5px;padding:0}.search-popup a.search-result-title{font-weight:700}.search-popup p.search-result{border-bottom:1px dashed #ccc;padding:5px 0}.search-popup .search-input-container{flex-grow:1;padding:2px}.search-popup .no-result{display:flex}.search-popup .search-result-list{width:100%}.search-popup .search-result-icon{color:#ccc;margin:auto}mark.search-keyword{background:0 0;border-bottom:1px dashed #ff2a2a;color:#ff2a2a;font-weight:700}.use-motion .animated{animation-fill-mode:none;visibility:inherit}.use-motion .sidebar .animated{animation-fill-mode:both}.btn{padding:0 10px}.headband{display:none}.pagination{text-align:left}@media (max-width:767px){.pagination{margin:80px 0 0;text-align:center}}.footer{background:var(--content-bg-color);color:var(--text-color);padding:10px 0}.footer-inner{text-align:left}@media (max-width:767px){.footer-inner{text-align:center}}.header-inner{align-items:center;display:flex;padding:20px 0}@media (max-width:767px){.header-inner{display:block;padding:10px 0}}.site-meta{line-height:normal}.site-meta .brand{padding:2px 1px}@media (max-width:767px){.site-meta .brand{display:block}}.site-meta .site-title{font-weight:bolder}.logo-line{background:var(--brand-color);display:block;height:2px;margin:0 auto;width:75%}@media (max-width:767px){.logo-line{display:none}}.use-motion .logo-line:first-of-type{transform:scaleX(0);transform-origin:left}.use-motion .logo-line:last-of-type{transform:scaleX(0);transform-origin:right}.site-subtitle{display:none}.site-nav{flex-grow:1}@media (max-width:767px){.site-nav{padding:10px 10px 0}}.menu{padding:0}.menu .menu-item{margin:0}@media (max-width:767px){.menu .menu-item{margin-top:5px}}.menu .menu-item a{border-radius:2px;padding:0 10px;transition-property:background}@media (max-width:767px){.menu .menu-item a{text-align:left}}.menu .menu-item .badge{background:#fff;border-radius:10px;color:#555;padding:1px 4px;text-shadow:1px 1px 0 rgba(0,0,0,.1)}.posts-expand.index .post-header{text-align:left}@media (max-width:767px){.posts-expand.index .post-header{text-align:center}}.posts-expand.index .post-meta-container{margin-top:5px}.posts-expand.index .post-meta{justify-content:flex-start}@media (max-width:767px){.posts-expand.index .post-meta{justify-content:center}}.posts-expand .post-eof{display:none}.posts-expand .post-block:not(:first-child){margin-top:120px}.posts-expand .post-header{margin-bottom:20px}.post-button,.posts-expand .post-tags{text-align:left}.posts-expand .post-tags a{background:var(--content-bg-color);border-bottom:0;padding:1px 5px}.posts-expand .post-tags a:hover{background:var(--menu-item-bg-color)}.posts-expand .post-nav{margin-top:40px}.post-button{margin-top:20px}.post-button .btn{background:0 0;border:0;border-bottom:2px solid var(--btn-default-border-color);padding:0;transition-property:border}.post-button .btn:hover{border-bottom-color:var(--btn-default-hover-border-color)}.main-inner{margin:0 auto;width:700px}@media (min-width:1200px){.main-inner{width:800px}}@media (min-width:1600px){.main-inner{width:900px}}@media (max-width:767px){.main-inner{padding-left:20px;padding-right:20px}.footer-inner,.header-inner,.main-inner{width:auto}}.main-inner{padding-bottom:80px}.post-block:first-of-type{padding-top:80px}@media (max-width:767px){.post-block:first-of-type{padding-top:60px}}@media (min-width:992px){.sidebar-active{padding-left:320px}}.sidebar{left:-320px;background:#222;bottom:0;box-shadow:inset 0 2px 6px #000;position:fixed;top:0;transition:all .2s ease-out;width:320px;z-index:1200}.sidebar-active .sidebar{left:0}.sidebar a{border-bottom-color:#555;color:#999}.sidebar a:hover{border-bottom-color:#eee;color:#eee}.links-of-author:not(:first-child){margin-top:15px}.links-of-author a{border-bottom-color:#555;display:inline-block;margin-bottom:10px;margin-right:10px;vertical-align:middle}.links-of-author a::before{background:#74f4ff;display:inline-block;margin-right:3px;transform:translateY(-2px);border-radius:50%;content:' ';height:4px;width:4px}.links-of-blogroll-item{padding:2px 10px}.links-of-blogroll-item a{box-sizing:border-box;display:inline-block;max-width:280px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sub-menu{margin:10px 0}.sub-menu .menu-item{display:inline-block}</style><noscript>
    
  </noscript>
<script>function loadCss(l){var d=document,h=d.head,s=d.createElement('link');s.rel='stylesheet';s.href=l;!function e(f){if (d.body)return f();setTimeout(function(){e(f)})}(function(){h.appendChild(s);});}loadCss('/style.css');loadCss('https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css');</script><noscript><link rel="stylesheet" href="/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css"></noscript></head>

<body itemscope="" itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">疯狂的茶几</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="疯狂的茶几" src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">疯狂的茶几</p>
  <div class="site-description" itemprop="description">懒人一个</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/tomhjx" title="GitHub → https://github.com/tomhjx" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:tom_hejiaxi@163.com" title="E-Mail → mailto:tom_hejiaxi@163.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/tomhjx" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.tomhjx.top/2020/11/26/PHP-8-0-0/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="疯狂的茶几">
      <meta itemprop="description" content="懒人一个">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="疯狂的茶几">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/11/26/PHP-8-0-0/" class="post-title-link" itemprop="url">PHP 8.0.0</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-11-26 15:00:00" itemprop="dateCreated datePublished" datetime="2020-11-26T15:00:00+08:00">2020-11-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2026-02-15 16:34:35" itemprop="dateModified" datetime="2026-02-15T16:34:35+08:00">2026-02-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>11k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>10 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://www.php.net/ChangeLog-8.php#PHP_8_0">在这里可以参看原文</a></p>
<ul>
<li>BZ2:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/71263">#71263</a> (fread() does not report bzip2.decompress errors).</li>
</ul>
</li>
<li>CLI:
<ul>
<li>Allow debug server binding to an ephemeral port via `-S localhost:0`.</li>
</ul>
</li>
<li>COM:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/55847">#55847</a> (DOTNET .NET 4.0 GAC new location).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/62474">#62474</a> (com_event_sink crashes on certain arguments).</li>
</ul>
</li>
<li>Calendar:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80007">#80007</a> (Potential type confusion in unixtojd() parameter parsing).</li>
</ul>
</li>
<li>Core:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/36365">#36365</a> (scandir duplicates file name at every 65535th file).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/49555">#49555</a> (Fatal error “Function must be a string” message should be renamed).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/62294">#62294</a> (register_shutdown_function() does not correctly handle exit code).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/62609">#62609</a> (Allow implementing Traversable on abstract classes).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/65274">#65274</a> (Enhance undefined class constant error with class name).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/65275">#65275</a> (Calling exit() in a shutdown function does not change the exit value in CLI).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/69084">#69084</a> (Unclear error message when not implementing a renamed abstract trait function).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/70839">#70839</a> (Converting optional argument to variadic forbidden by LSP checks).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/74558">#74558</a> (Can’t rebind closure returned by Closure::fromCallable()).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/77561">#77561</a> (Shebang line not stripped for non-primary script).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/77619">#77619</a> (Wrong reflection on MultipleIterator::__construct).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/77966">#77966</a> (Cannot alias a method named “namespace”).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/78236">#78236</a> (convert error on receiving variables when duplicate [).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/78770">#78770</a> (Incorrect callability check inside internal methods).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79108">#79108</a> (Referencing argument in a function makes it a reference in the stack trace).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79368">#79368</a> (“Unexpected end of file” is not an acceptable error message).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79462">#79462</a> (method_exists and property_exists incoherent behavior).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79467">#79467</a> (data:// wrappers are writable).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79521">#79521</a> (Check __set_state structure).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79790">#79790</a> (“Illegal offset type” exception during AST evaluation not handled properly).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79791">#79791</a> (Assertion failure when unsetting variable during binary op).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79828">#79828</a> (Segfault when trying to access non-existing variable).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79841">#79841</a> (Syntax error in configure / unescaped “[]” in php.m4).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79852">#79852</a> (count(DOMNodeList) doesn’t match count(IteratorIterator(DOMNodeList))).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79867">#79867</a> (Promoted untyped properties should get null default value).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79897">#79897</a> (Promoted constructor params with attribs cause crash).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79927">#79927</a> (Generator doesn’t throw exception after multiple yield from iterable).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79946">#79946</a> (Build fails due to undeclared UINT32_C).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79948">#79948</a> (Exit in auto-prepended file does not abort PHP execution).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80045">#80045</a> (memleak after two set_exception_handler calls with __call).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80096">#80096</a> (Segmentation fault with named arguments in nested call).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80109">#80109</a> (Cannot skip arguments when extended debug is enabled).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80225">#80225</a> (broken namespace usage in eval code).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80258">#80258</a> (Windows Deduplication Enabled, randon permission errors).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80280">#80280</a> (ADD_EXTENSION_DEP() fails for ext/standard and ext/date).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80334">#80334</a> (assert() vs named parameters - confusing error).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80055">#80055</a> (Abstract trait methods returning “self” cannot be fulfilled by traits).</li>
<li>Fixed faulty generator cleanup with yield from.</li>
<li>Implement #[Attr] Attribute syntax as per final vote in RFC <a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/shorter_attribute_syntax_change">https://wiki.php.net/rfc/shorter_attribute_syntax_change</a></li>
<li>Implemented FR <a target="_blank" rel="noopener" href="http://bugs.php.net/47074">#47074</a> (phpinfo() reports “On” as 1 for the some extensions).</li>
<li>Implemented FR <a target="_blank" rel="noopener" href="http://bugs.php.net/72089">#72089</a> (require() throws fatal error instead of exception).</li>
<li>Removed the pdo_odbc.db2_instance_name php.ini directive.</li>
<li>Use SSE2 instructions do locale independent strtolower.</li>
<li><a target="_blank" rel="noopener" href="https://www.laruence.com/2020/06/16/5916.html">How ?</a></li>
</ul>
</li>
<li>Curl:
<ul>
<li>Bumped required libcurl version to 7.29.0.</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80121">#80121</a> (Null pointer deref if CurlHandle directly instantiated).</li>
</ul>
</li>
<li>DOM:
<ul>
<li>Add property DOMXPath::$registerNodeNamespaces and constructor argument that allow global flag to configure query() or evaluate() calls.</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79968">#79968</a> (DOMChildNode API crash on unattached nodes).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80268">#80268</a> (loadHTML() truncates at NUL bytes).</li>
</ul>
</li>
<li>Date:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/60302">#60302</a> (DateTime::createFromFormat should new static(), not new self()).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/65547">#65547</a> (Default value for sunrise/sunset zenith still wrong).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/69044">#69044</a> (discrepancy between time and microtime).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80057">#80057</a> (DateTimeImmutable::createFromFormat() does not populate time).</li>
<li>Implemented FR <a target="_blank" rel="noopener" href="http://bugs.php.net/79903">#79903</a> (datetime: new format “p”, same as “P” but returning “Z” for UTC).</li>
</ul>
</li>
<li>Enchant:
<ul>
<li>Add LIBENCHANT_VERSION macro.</li>
<li>Add enchant_dict_add and enchant_dict_is_added functions.</li>
<li>Deprecate enchant_broker_set_dict_path, enchant_broker_get_dict_path, enchant_dict_add_to_personal and enchant_dict_is_in_session.</li>
<li>Use libenchant-2 when available.</li>
</ul>
</li>
<li>FFI:
<ul>
<li>Added FFI\CType::getName() method.</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79177">#79177</a> (FFI doesn’t handle well PHP exceptions within callback).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79749">#79749</a> (Converting FFI instances to bool fails).</li>
</ul>
</li>
<li>FPM:
<ul>
<li>Add pm.status_listen option.</li>
</ul>
</li>
<li>Fileinfo:
<ul>
<li>Upgrade to libmagic 5.39.</li>
</ul>
</li>
<li>GD:
<ul>
<li>Added imagegetinterpolation().</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/55005">#55005</a> (imagepolygon num_points requirement).</li>
<li>Made the $num_points parameter of php_imagepolygon optional.</li>
<li>Removed deprecated image2wbmp().</li>
<li>Removed deprecated png2wbmp() and jpeg2wbmp().</li>
<li>Replaced gd resources with objects.</li>
</ul>
</li>
<li>IMAP:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/64076">#64076</a> (imap_sort() does not return FALSE on failure).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/76618">#76618</a> (segfault on imap_reopen).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80213">#80213</a> (imap_mail_compose() segfaults on certain $bodies).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80215">#80215</a> (imap_mail_compose() may modify by-val parameters).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80216">#80216</a> (imap_mail_compose() does not validate types/encodings).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80220">#80220</a> (imap_mail_compose() may leak memory).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80223">#80223</a> (imap_mail_compose() leaks envelope on malformed bodies).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80226">#80226</a> (imap_sort() leaks sortpgm memory).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80239">#80239</a> (imap_rfc822_write_address() leaks memory).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80242">#80242</a> (imap_mail_compose() segfaults for multipart with rfc822).</li>
<li>Fixed minor regression caused by fixing bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80220">#80220</a>.</li>
</ul>
</li>
<li>Iconv:
<ul>
<li>Dropped support for iconv without proper errno setting.</li>
</ul>
</li>
<li>Intl:
<ul>
<li>Removed deprecated INTL_IDNA_VARIANT_2003.</li>
</ul>
</li>
<li>JIT:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/77857">#77857</a> (Wrong result if executed with JIT).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79255">#79255</a> (PHP cannot be compiled with enable JIT).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79582">#79582</a> (Crash seen when opcache.jit=1235 and opcache.jit_debug=2).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79743">#79743</a> (Fatal error when assigning to array property with JIT enabled).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79864">#79864</a> (JIT segfault in Symfony OptionsResolver).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79888">#79888</a> (Incorrect execution with JIT enabled).</li>
</ul>
</li>
<li>JSON:
<ul>
<li>The JSON extension is now an integral part of PHP and cannot be disabled as per RFC: <a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/always_enable_json">https://wiki.php.net/rfc/always_enable_json</a> (tandre)</li>
</ul>
</li>
<li>LDAP:
<ul>
<li>Fixed memory leaks.</li>
<li>Removed deprecated ldap_sort.</li>
</ul>
</li>
<li>MBString:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/76999">#76999</a> (mb_regex_set_options() return current options).</li>
<li>Removed the unused $is_hex parameter from mb_decode_numericentity().</li>
</ul>
</li>
<li>MySQLi:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/76809">#76809</a> (SSL settings aren’t respected when persistent connections are used).</li>
</ul>
</li>
<li>Mysqlnd:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/60594">#60594</a> (mysqlnd exposes 160 lines of stats in phpinfo).</li>
</ul>
</li>
<li>OCI8:
<ul>
<li>Deprecated old OCI8 function aliases.</li>
<li>Modernized oci_register_taf_callback() callable argument parsing implementation.</li>
<li>Removed obsolete no-op function oci_internal_debug().</li>
</ul>
</li>
<li>ODBC:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/22986">#22986</a> (odbc_connect() may reuse persistent connection).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/44618">#44618</a> (Fetching may rely on uninitialized data).</li>
</ul>
</li>
<li>Opcache:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/76535">#76535</a> (Opcache does not replay compile-time warnings).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/78654">#78654</a> (Incorrectly computed opcache checksum on files with non-ascii characters).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79665">#79665</a> (ini_get() and opcache_get_configuration() inconsistency).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80030">#80030</a> (Optimizer segfault with isset on static property with undef dynamic class name).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80175">#80175</a> (PHP8 RC1 - JIT Buffer not working).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80184">#80184</a> (Complex expression in while / if statements resolves to false incorrectly).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80255">#80255</a> (Opcache bug (bad condition result) in 8.0.0rc1).</li>
<li>Fixed run-time binding of preloaded dynamically declared function.</li>
</ul>
</li>
<li>OpenSSL:
<ul>
<li>Added Cryptographic Message Syntax (CMS) support.</li>
</ul>
</li>
<li>PCRE:
<ul>
<li>Don’t ignore invalid escape sequences.</li>
<li>Updated to PCRE2 10.35.</li>
</ul>
</li>
<li>PDO:
<ul>
<li>Changed default PDO error mode to exceptions.</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/77849">#77849</a> (Disable cloning of PDO handle/connection objects).</li>
</ul>
</li>
<li>PDO_Firebird:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/64937">#64937</a> (Firebird PDO preprocessing sql).</li>
</ul>
</li>
<li>PDO_OCI:
<ul>
<li>Added support for setting and getting the oracle OCI 18c call timeout.</li>
</ul>
</li>
<li>PDO_PGSQL:
<ul>
<li>Bumped required libpq version to 9.1.</li>
</ul>
</li>
<li>PGSQL:
<ul>
<li>Bumped required libpq version to 9.1.</li>
</ul>
</li>
<li>Phpdbg:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/76596">#76596</a> (phpdbg support for display_errors=stderr).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/76801">#76801</a> (too many open files).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/77800">#77800</a> (phpdbg segfaults on listing some conditional breakpoints).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/77805">#77805</a> (phpdbg build fails when readline is shared).</li>
</ul>
</li>
<li>Reflection:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/64592">#64592</a> (ReflectionClass::getMethods() returns methods out of scope).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/69180">#69180</a> (Reflection does not honor trait conflict resolution / method aliasing).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/74939">#74939</a> (Nested traits’ aliased methods are lowercased).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/77325">#77325</a> (ReflectionClassConstant::$class returns wrong class when extending).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/78697">#78697</a> (ReflectionClass::implementsInterface - inaccurate error message with traits).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80190">#80190</a> (ReflectionMethod::getReturnType() does not handle static as part of union type).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80299">#80299</a> (ReflectionFunction-&gt;invokeArgs confused in arguments).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80370">#80370</a> (getAttributes segfault on dynamic properties).</li>
<li>Implemented FR <a target="_blank" rel="noopener" href="http://bugs.php.net/79628">#79628</a> (Add $filter parameter for ReflectionClass::getConstants and ReflectionClass::getReflectionConstants) (carusogabriel)</li>
<li>Implement ReflectionProperty::hasDefaultValue and Reflection::getDefaultValue (beberlei)</li>
</ul>
</li>
<li>SNMP:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/70461">#70461</a> (disable md5 code when it is not supported in net-snmp).</li>
</ul>
</li>
<li>SPL:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/65006">#65006</a> (spl_autoload_register fails with multiple callables using self, same method).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/65387">#65387</a> (Circular references in SPL iterators are not garbage collected).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/71236">#71236</a> (Second call of spl_autoload_register() does nothing if it has no arguments).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79987">#79987</a> (Memory leak in SplFileInfo because of missing zend_restore_error_handling()).</li>
<li>SplFixedArray is now IteratorAggregate rather than Iterator.</li>
</ul>
</li>
<li>SQLite3:
<ul>
<li>Added SQLite3::setAuthorizer() and respective class constants.</li>
</ul>
</li>
<li>Session:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/73529">#73529</a> (session_decode() silently fails on wrong input).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/78624">#78624</a> (session_gc return value for user defined session handlers).</li>
</ul>
</li>
<li>Shmop:
<ul>
<li>Converted shmop resources to objects.</li>
</ul>
</li>
<li>SimpleXML:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/63575">#63575</a> (Root elements are not properly cloned).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/75245">#75245</a> (Don’t set content of elements with only whitespaces).</li>
</ul>
</li>
<li>Sodium:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/77646">#77646</a> (sign_detached() strings not terminated).</li>
</ul>
</li>
<li>Standard:
<ul>
<li>Don’t force rebuild of symbol table, when populating $http_response_header variable by the HTTP stream wrapper.</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/47983">#47983</a> (mixed LF and CRLF line endings in mail()).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/64060">#64060</a> (lstat_stat_variation7.phpt fails on certain file systems).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/75902">#75902</a> (str_replace should warn when misused with nested arrays).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/76859">#76859</a> (stream_get_line skips data if used with data-generating filter).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/77204">#77204</a> (getimagesize(): Read error! should mention file path).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/78385">#78385</a> (parse_url() does not include ‘query’ when question mark is the last char).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/79868">#79868</a> (Sorting with array_unique gives unwanted result).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80256">#80256</a> (file_get_contents strip first line with chunked encoding redirect).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80266">#80266</a> (parse_url silently drops port number 0).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80290">#80290</a> (Double free when ASSERT_CALLBACK is used with a dynamic message).</li>
<li>Implemented FR <a target="_blank" rel="noopener" href="http://bugs.php.net/78638">#78638</a> (__PHP_Incomplete_Class should be final).</li>
<li>Made quoting of cmd execution functions consistent.</li>
</ul>
</li>
<li>Tidy:
<ul>
<li>Removed the unused $use_include_path parameter from tidy_repair_string().</li>
</ul>
</li>
<li>Tokenizer:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/80328">#80328</a> (PhpToken::getAll() confusing name).</li>
</ul>
</li>
<li>XML:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/76874">#76874</a> (xml_parser_free() should never leak memory).</li>
</ul>
</li>
<li>XMLWriter:
<ul>
<li>Changed functions to accept/return XMLWriter objects instead of resources.</li>
<li>Implemented FR <a target="_blank" rel="noopener" href="http://bugs.php.net/79344">#79344</a> (xmlwriter_write_attribute_ns: $prefix should be nullable).</li>
<li>Removed return types from XMLWriter stubs.</li>
</ul>
</li>
<li>Zip:
<ul>
<li>Add “flags” options to ZipArchive::addGlob and addPattern methods keeping previous behavior having FL_OVERWRITE by default.</li>
<li>Add ZipArchive::EM_UNKNOWN and ZipArchive::EM_TRAD_PKWARE constants.</li>
<li>Add ZipArchive::isCompressionMethodSupported() and ZipArchive::isEncryptionMethodSupported() method (libzip 1.7.0).</li>
<li>Add ZipArchive::replaceFile() method.</li>
<li>Add ZipArchive::setCancelCallback method (since libzip 1.6.0).</li>
<li>Add ZipArchive::setMtimeName and ZipArchive::setMtimeIndex methods.</li>
<li>Add ZipArchive::setProgressCallback method (since libzip 1.3.0).</li>
<li>Add lastId property to ZipArchive.</li>
<li>Add optional “flags” parameter to ZipArchive::addEmptyDir, addFile and addFromString methods.</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/50678">#50678</a> (files extracted by ZipArchive class lost their original modified time).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/72374">#72374</a> (remove_path strips first char of filename).</li>
<li>Implemented FR <a target="_blank" rel="noopener" href="http://bugs.php.net/77960">#77960</a> (add compression / encryption options for ZipArchive::addGlob and ZipArchive::addPattern).</li>
<li>ZipArchive::status and ZipArchive::statusSys properties and ZipArchive::getStatusString() method stay valid after the archive is closed.</li>
</ul>
</li>
<li>Zlib:
<ul>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/71417">#71417</a> (fread() does not report zlib.inflate errors).</li>
<li>Fixed bug <a target="_blank" rel="noopener" href="http://bugs.php.net/78792">#78792</a> (zlib.output_compression disabled by Content-Type: image/).</li>
</ul>
</li>
</ul>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/11/26/PHP-8-0-0/#more" rel="contents">
                阅读全文 »
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.tomhjx.top/2020/11/26/PHP-8-0-x/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="疯狂的茶几">
      <meta itemprop="description" content="懒人一个">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="疯狂的茶几">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/11/26/PHP-8-0-x/" class="post-title-link" itemprop="url">PHP 8.0.x</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-11-26 15:00:00" itemprop="dateCreated datePublished" datetime="2020-11-26T15:00:00+08:00">2020-11-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2026-02-15 16:34:35" itemprop="dateModified" datetime="2026-02-15T16:34:35+08:00">2026-02-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>40k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>37 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="目标及关键路径"><a class="header-anchor" href="#目标及关键路径">¶</a>目标及关键路径</h1>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.php.net/releases/8.0/zh.php">https://www.php.net/releases/8.0/zh.php</a></p>
</blockquote>
<ul>
<li>提升性能
<ul>
<li>基于缓存前置思想，使用CPU机器码缓存，绕过Zend VM及其过程开销来尽可能提升性能
<ul>
<li>JIT</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="从-PHP-7-4-x-移植到-PHP-8-0-x"><a class="header-anchor" href="#从-PHP-7-4-x-移植到-PHP-8-0-x">¶</a>从 PHP 7.4.x 移植到 PHP 8.0.x</h1>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://php.watch/versions/8.0">PHP 8.0: What’s New and Changed</a><br>
<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration80.php">PHP Manual</a></p>
</blockquote>
<h2 id="不向后兼容的变更"><a class="header-anchor" href="#不向后兼容的变更">¶</a>不向后兼容的变更</h2>
<h3 id="PHP-Core"><a class="header-anchor" href="#PHP-Core">¶</a>PHP Core</h3>
<ul>
<li>
<p>字符串与数字的比较</p>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/saner-numeric-strings"><sup>v8.0.0</sup></a> 数字与非数字形式的字符串之间的非严格比较现在将首先将数字转为字符串，然后比较这两个字符串。 数字与数字形式的字符串之间的比较仍然像之前那样进行。 请注意，这意味着 0 == “not-a-number” 现在将被认为是 false 。</p>
<table>
<thead>
<tr>
<th>Comparison</th>
<th>Before</th>
<th>After</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0 == "0"</code></td>
<td><strong><code>true</code></strong></td>
<td><strong><code>true</code></strong></td>
</tr>
<tr>
<td><code>0 == "0.0"</code></td>
<td><strong><code>true</code></strong></td>
<td><strong><code>true</code></strong></td>
</tr>
<tr>
<td><code>0 == "foo"</code></td>
<td><strong><code>true</code></strong></td>
<td><strong><code>false</code></strong></td>
</tr>
<tr>
<td><code>0 == ""</code></td>
<td><strong><code>true</code></strong></td>
<td><strong><code>false</code></strong></td>
</tr>
<tr>
<td><code>42 == " 42"</code></td>
<td><strong><code>true</code></strong></td>
<td><strong><code>true</code></strong></td>
</tr>
<tr>
<td><code>42 == "42foo"</code></td>
<td><strong><code>true</code></strong></td>
<td><strong><code>false</code></strong></td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/5371"><sup>v8.0.0</sup></a> <code>match</code> 现在是一个保留字。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/match_expression_v2">PHP RFC: Match expression v2</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/5925"><sup>v8.0.0</sup></a> 断言（Assertion）失败现在默认抛出异常。如果想要改回之前的行为，可以在 INI 设置中设置 <code>assert.exception=0</code> 。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/1a7c0d52dc31623bd88a87e03849ab915275c49d"><sup>8.0.0</sup></a> 与类名相同的方法名将不再被当做构造方法。应该使用<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.oop5.decon.php#object.construct">__construct()</a> 来取代它。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/6c73b50cf6cf71be26700ce168d5e69350637d71"><sup>8.0.0</sup></a> 不再允许通过静态调用的方式去调用非静态方法。因此<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.is-callable.php">is_callable()</a>在检查一个类名与非静态方法 时将返回失败（应当检查一个类的实例）。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.type-juggling.php"><sup>v8.0.0</sup></a> <code>(real)</code> 和 <code>(unset)</code> 转换已被移除。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/920b4b249f71e6cbfd795f81c6a08126a33c659e"><sup>v8.0.0</sup></a> The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/errorfunc.configuration.php#ini.track-errors">track_errors</a> ini directive has been removed. This means that php_errormsg is no longer available. The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.error-get-last.php">error_get_last()</a> function may be used instead.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/3d39479f4d7c86c66aa92fc5d0d97fb660109ee9"><sup>v8.0.0</sup></a> The ability to define case-insensitive constants has been removed. The third argument to <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.define.php">define()</a> may no longer be <code>true</code>.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/0dfd918ee7a3520836b875b8c24f0a5f98fbee15"><sup>v8.0.0</sup></a> The ability to specify an autoloader using an <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.autoload.php">__autoload()</a> function has been removed. <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.spl-autoload-register.php">spl_autoload_register()</a> should be used instead.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/2f1f34952e9a0dfb3adcbec82ba69f4ac82b3a3d"><sup>v8.0.0</sup></a> The <code>errcontext</code> argument will no longer be passed to custom error handlers set with <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.set-error-handler.php">set_error_handler()</a>.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/ee16d99504f0014c3d292809da927fb622293f41"><sup>v8.0.0</sup></a> <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.create-function.php">create_function()</a> has been removed. Anonymous functions may be used instead.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/6db97f5e3ea3ac9774a06981226a0fe1bca02b38"><sup>v8.0.0</sup></a> <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.each.php">each()</a> has been removed. <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/control-structures.foreach.php">foreach</a> or <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.arrayiterator.php">ArrayIterator</a> should be used instead.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/87fefd165a29091c3cb462431529107189c12d55"><sup>v8.0.0</sup></a> The ability to unbind this from closures that were created from a method, using <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/closure.fromcallable.php">Closure::fromCallable()</a> or <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/reflectionmethod.getclosure.php">ReflectionMethod::getClosure()</a>, has been removed.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/87fefd165a29091c3cb462431529107189c12d55"><sup>v8.0.0</sup></a> The ability to unbind this from proper closures that contain uses of this has also been removed.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/c46b2ed677aecfc2f07993eefad0326f31c5cc44"><sup>v8.0.0</sup></a> The ability to use <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.array-key-exists.php">array_key_exists()</a> with objects has been removed. <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.isset.php">isset()</a> or <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.property-exists.php">property_exists()</a> may be used instead.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/14bdb0cfc7b62205c75f6d5c783e343259796776"><sup>v8.0.0</sup></a> The behavior of <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.array-key-exists.php">array_key_exists()</a> regarding the type of the <code>key</code> parameter has been made consistent with <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.isset.php">isset()</a> and normal array access. All key types now use the usual coercions and array/object keys throw a <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.typeerror.php">TypeError</a>.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/6732028273b109cb342387ab5580c367f629d0ac"><sup>v8.0.0</sup></a> Any array that has a number n as its first numeric key will use n+1 for its next implicit key, even if n is negative.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/negative_array_index">PHP RFC: Arrays starting with a negative index</a><br>
<a target="_blank" rel="noopener" href="https://php.watch/versions/8.0/negative-array-keys">PHP 8.0: Implicit negative array key increments do not skip negative numbers</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/ea5854ca8c1193aacaee6fe059b2bfba636769e0"><sup>v8.0.0</sup></a> The default error_reporting level is now <code>E_ALL</code>. Previously it excluded <code>E_NOTICE</code> and <code>E_DEPRECATED</code>.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/790ed7d540aa04d22b1fc72a1f17e57ed6ef94e7"><sup>v8.0.0</sup></a> <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/errorfunc.configuration.php#ini.display-startup-errors">display_startup_errors</a> is now enabled by default.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/5c24f8042d46f3dfbe8eb122a64792758fff5271"><sup>v8.0.0</sup></a> Using parent inside a class that has no parent will now result in a fatal compile-time error.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/3685"><sup>v8.0.0</sup></a> The <code>@</code> operator will no longer silence fatal errors (<code>E_ERROR</code>, <code>E_CORE_ERROR</code>, <code>E_COMPILE_ERROR</code>, <code>E_USER_ERROR</code>, <code>E_RECOVERABLE_ERROR</code>, <code>E_PARSE</code>). Error handlers that expect error_reporting to be <code>0</code> when <code>@</code> is used, should be adjusted to use a mask check instead:</p>
<pre><code class="language-php">&lt;?php
//&nbsp;Replace
function&nbsp;my_error_handler($err_no,&nbsp;$err_msg,&nbsp;$filename,&nbsp;$linenum)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(error_reporting()&nbsp;==&nbsp;0)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;&nbsp;//&nbsp;Silenced
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...
}

//&nbsp;With
function&nbsp;my_error_handler($err_no,&nbsp;$err_msg,&nbsp;$filename,&nbsp;$linenum)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(error_reporting()&nbsp;&amp;&nbsp;$err_no))&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;&nbsp;//&nbsp;Silenced
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...
}
?&gt;
</code></pre>
<p>Additionally, care should be taken that error messages are not displayed in production environments, which can result in information leaks. Please ensure that <code>display_errors=Off</code> is used in conjunction with error logging.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://php.watch/versions/8.0/fatal-error-suppression">PHP 8.0: @ Error Suppression operator does not silent fatal errors</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/5394"><sup>v8.0.0</sup></a> <code>#[</code> is no longer interpreted as the start of a comment, as this syntax is now used for attributes.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/attributes_v2">PHP RFC: Attributes v2</a><br>
<a target="_blank" rel="noopener" href="https://externals.io/message/108907">Discussion: Attributes v2</a><br>
<a target="_blank" rel="noopener" href="https://php.watch/versions/8.0/attributes">PHP 8.0: Attributes</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/fd2db1192997f5778139ea8e9d25189c7c08af2c"><sup>v8.0.0</sup></a> Inheritance errors due to incompatible method signatures (<a target="_blank" rel="noopener" href="https://microsoft.github.io/language-server-protocol/">LSP</a> violations) will now always generate a fatal error. Previously a warning was generated in some cases.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/lsp_errors">PHP RFC: Always generate fatal error for incompatible method signatures</a><br>
<a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/4000">Github Pull Request: Always generate fatal error for LSP failures #4000</a><br>
<a target="_blank" rel="noopener" href="https://php.watch/versions/8.0/lsp-errors">PHP 8.0: Fatal errors on incompatible method signatures</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/3b23694aac62ad9c2dfdb60cafb304f9fc0b7c04"><sup>v7.4.0</sup></a> The precedence of the concatenation operator has changed relative to bitshifts and addition as well as subtraction.</p>
<pre><code class="language-php">&lt;?php
echo&nbsp;"Sum:&nbsp;"&nbsp;.&nbsp;$a&nbsp;+&nbsp;$b;
//&nbsp;was&nbsp;previously&nbsp;interpreted&nbsp;as:
echo&nbsp;("Sum:&nbsp;"&nbsp;.&nbsp;$a)&nbsp;+&nbsp;$b;
//&nbsp;is&nbsp;now&nbsp;interpreted&nbsp;as:
echo&nbsp;"Sum:"&nbsp;.&nbsp;($a&nbsp;+&nbsp;$b);
?&gt;
</code></pre>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/concatenation_precedence">PHP RFC: Change the precedence of the concatenation operator</a><br>
<a target="_blank" rel="noopener" href="https://php.watch/versions/8.0/contact-add-sub-precedence">PHP 8.0: +/- operators take higher precedence when used with concat (.) operator</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/cdd4e591a46ad171aa5c0776671788cd710a9d4b"><sup>v8.0.0</sup></a> Arguments with a default value that resolves to <code>null</code> at runtime will no longer implicitly mark the argument type as nullable. Either an explicit nullable type, or an explicit <code>null</code> default value has to be used instead.</p>
<pre><code class="language-php">&lt;?php
//&nbsp;Replace
function&nbsp;test(int&nbsp;$arg&nbsp;=&nbsp;CONST_RESOLVING_TO_NULL)&nbsp;{}
//&nbsp;With
function&nbsp;test(?int&nbsp;$arg&nbsp;=&nbsp;CONST_RESOLVING_TO_NULL)&nbsp;{}
//&nbsp;Or
function&nbsp;test(int&nbsp;$arg&nbsp;=&nbsp;null)&nbsp;{}
?&gt;
</code></pre>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/4720">Github Pull Request: Don’t make argument nullable based on AST null initializer #4720</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/e8b0163e0b6632c77cb8a3e863671c87793dbfc4"><sup>v8.0.0</sup></a> A number of warnings have been converted into <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.error.php">Error</a> exceptions:</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/engine_warnings">PHP RFC: Reclassifying engine warnings</a></p>
</blockquote>
<ul>
<li>Attempting to write to a property of a non-object. Previously this implicitly created an stdClass object for null, false and empty strings.</li>
<li>Attempting to append an element to an array for which the PHP_INT_MAX key is already used.</li>
<li>Attempting to use an invalid type (array or object) as an array key or string offset.</li>
<li>Attempting to write to an array index of a scalar value.</li>
<li>Attempting to unpack a non-array/Traversable.</li>
<li>Attempting to access unqualified constants which are undefined. Previously, unqualified constant accesses resulted in a warning and were interpreted as strings.</li>
</ul>
<p>A number of notices have been converted into warnings:</p>
<ul>
<li>Attempting to read an undefined variable.</li>
<li>Attempting to read an undefined property.</li>
<li>Attempting to read an undefined array key.</li>
<li>Attempting to read a property of a non-object.</li>
<li>Attempting to access an array index of a non-array.</li>
<li>Attempting to convert an array to string.</li>
<li>Attempting to use a resource as an array key.</li>
<li>Attempting to use null, a boolean, or a float as a string offset.</li>
<li>Attempting to read an out-of-bounds string offset.</li>
<li>Attempting to assign an empty string to a string offset.</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/66659d6cf6ae2547c0e582a6e3aa0d1ee0e3835f"><sup>v8.0.0</sup></a> Attempting to assign multiple bytes to a string offset will now emit a warning.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/d44cf9b539c5dfbd3ff0295bac25165e79214e09"><sup>v8.0.0</sup></a> Unexpected characters in source files (such as NUL bytes outside of strings) will now result in a <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.parseerror.php">ParseError</a> exception instead of a compile warning.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/4767">Github Pull Request: Replace “unexpected character” warning with ParseError #4767</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/db233501ff9d56765ef4a870b777a643c2136711"><sup>v8.0.0</sup></a>  Uncaught exceptions now go through “clean shutdown”, which means that destructors will be called after an uncaught exception.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/64b40f69dca440e86e608847a39b795aedf75861"><sup>v8.0.0</sup></a> The compile time fatal error “Only variables can be passed by reference” has been delayed until runtime, and converted into an “Argument cannot be passed by reference” <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.error.php">Error</a> exception.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/64b40f69dca440e86e608847a39b795aedf75861"><sup>v8.0.0</sup></a> Some “Only variables should be passed by reference” notices have been converted to “Argument cannot be passed by reference” exception.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/72bd55902d1908857f47555ad69458861e1acd94"><sup>v8.0.0</sup></a> The generated name for anonymous classes has changed. It will now include the name of the first parent or interface:</p>
<pre><code class="language-php">&lt;?php
new&nbsp;class&nbsp;extends&nbsp;ParentClass&nbsp;{};
//&nbsp;-&gt;&nbsp;ParentClass@anonymous
new&nbsp;class&nbsp;implements&nbsp;FirstInterface,&nbsp;SecondInterface&nbsp;{};
//&nbsp;-&gt;&nbsp;FirstInterface@anonymous
new&nbsp;class&nbsp;{};
//&nbsp;-&gt;&nbsp;class@anonymous
?&gt;
</code></pre>
<p>The name shown above is still followed by a NUL byte and a unique suffix.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/5153">Github Pull Request: Improve generated names for anonymous classes #5153</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/fff5771cccaca49565c90349320f3c06cbe19328"><sup>v8.0.0</sup></a> Non-absolute trait method references in trait alias adaptations are now required to be unambiguous:</p>
<pre><code class="language-php">&lt;?php
class&nbsp;X&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;T1,&nbsp;T2&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;as&nbsp;otherFunc;
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func()&nbsp;{}
}
?&gt;
</code></pre>
<p>If both <code>T1::func()</code> and <code>T2::func()</code> exist, this code was previously silently accepted, and func was assumed to refer to <code>T1::func</code>. Now it will generate a fatal error instead, and either <code>T1::func</code> or <code>T2::func</code> needs to be written explicitly.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/5232">Github Pull Request: Require non-absolute trait method refs to be unambiguous #5232</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/f74e30c07c2a94921fbfb7b8936324707505bd75"><sup>v8.0.0</sup></a> The signature of abstract methods defined in traits is now checked against the implementing class method:</p>
<pre><code class="language-php">
&lt;?php
trait&nbsp;MyTrait&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;abstract&nbsp;private&nbsp;function&nbsp;neededByTrait():&nbsp;string;
}

class&nbsp;MyClass&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;MyTrait;

&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Error,&nbsp;because&nbsp;of&nbsp;return&nbsp;type&nbsp;mismatch.
&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;neededByTrait():&nbsp;int&nbsp;{&nbsp;return&nbsp;42;&nbsp;}
}
?&gt;
</code></pre>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/abstract_trait_method_validation">PHP RFC: Validation for abstract trait methods</a><br>
<a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/5068">Github Pull Request: Check abstract method signatures coming from traits #5068</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/53eee290b6f5ca531aef19885a392c939013ce36"><sup>v8.0.0</sup></a> Disabled functions are now treated exactly like non-existent functions. Calling a disabled function will report it as unknown, and redefining a disabled function is now possible.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/5473">Github Pull Request: Completely remove disabled functions from function table #5473</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/69888c3ff1f2301ead8e37b23ff8481d475e29d2"><sup>v8.0.0</sup></a> <code>data://</code> stream wrappers are no longer writable, which matches the documented behavior.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/5bc1e224dbd660cea99c222baf8bd3c215d25073"><sup>v8.0.0</sup></a> The arithmetic and bitwise operators <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>**</code>, <code>%</code>, <code>&lt;&lt;</code>, <code>&gt;&gt;</code>, <code>&amp;</code>, <code>|</code>, <code>^</code>, <code>~</code>, <code>++</code>, <code>--</code> will now consistently throw a <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.typeerror.php">TypeError</a> when one of the operands is an array, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.resource.php">资源(resource)</a> or non-overloaded object. The only exception to this is the array <code>+</code> array merge operation, which remains supported.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/arithmetic_operator_type_checks">PHP RFC: Stricter type checks for arithmetic/bitwise operators</a><br>
<a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/5331">Github Pull Request: Make numeric operations on resources, arrays and objects type errors #5331</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/4a816584a4d483722485e5163396ea1bb2a6aee7"><sup>v8.0.0</sup></a> Float to string casting will now always behave locale-independently.</p>
<pre><code class="language-php">&lt;?php
setlocale(LC_ALL,&nbsp;"de_DE");
$f&nbsp;=&nbsp;3.14;
echo&nbsp;$f,&nbsp;"\n";
//&nbsp;Previously:&nbsp;3,14
//&nbsp;Now:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.14
?&gt;
</code></pre>
<p>See <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.printf.php">printf()</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.number-format.php">number_format()</a> and <strong>NumberFormatter()</strong> for ways to customize number formatting.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/locale_independent_float_to_string">PHP RFC: Locale-independent float to string cast</a><br>
<a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/5224">Github Pull Request: Make float to string conversions locale-independent #5224</a></p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/php/php-src/commit/bc3ee2eeea1a3ca3ff33263861758d6ed54f3b16"><sup>v8.0.0</sup></a> Support for deprecated curly braces for offset access has been removed.</p>
<pre><code class="language-php">&lt;?php
//&nbsp;Instead&nbsp;of:
$array{0};
$array{"key"};
//&nbsp;Write:
$array[0];
$array["key"];
?&gt;
</code></pre>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.php.net/rfc/deprecate_curly_braces_array_access">PHP RFC: Deprecate curly brace syntax for accessing array elements and string offsets</a><br>
<a target="_blank" rel="noopener" href="https://github.com/php/php-src/pull/4416">Github Pull Request: Deprecate curly brace syntax for array/string offset access #4416</a></p>
</blockquote>
</li>
<li>
<p>Applying the final modifier on a private method will now produce a warning unless that method is the constructor.</p>
</li>
<li>
<p>If an object constructor <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.exit.php">exit()</a>s, the object destructor will no longer be called. This matches the behavior when the constructor throws.</p>
</li>
<li>
<p>Namespaced names can no longer contain whitespace: While <code>Foo\Bar</code> will be recognized as a namespaced name, <code>Foo \ Bar</code> will not. Conversely, reserved keywords are now permitted as namespace segments, which may also change the interpretation of code: <code>new\x</code> is now the same as <code>constant('new\x')</code>, not <code>new \x()</code>.</p>
</li>
<li>
<p>Nested ternaries now require explicit parentheses.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.debug-backtrace.php">debug_backtrace()</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/exception.gettrace.php">Exception::getTrace()</a> will no longer provide references to arguments. It will not be possible to change function arguments through the backtrace.</p>
</li>
<li>
<p>Numeric string handling has been altered to be more intuitive and less error-prone. Trailing whitespace is now allowed in numeric strings for consistency with how leading whitespace is treated. This mostly affects:</p>
<ul>
<li>The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.is-numeric.php">is_numeric()</a> function</li>
<li>String-to-string comparisons</li>
<li>Type declarations</li>
<li>Increment and decrement operations</li>
</ul>
<p>The concept of a “leading-numeric string” has been mostly dropped; the cases where this remains exist in order to ease migration. Strings which emitted an <code>E_NOTICE</code> “A non well-formed numeric value encountered” will now emit an <code>E_WARNING</code> “A non-numeric value encountered” and all strings which emitted an <code>E_WARNING</code> “A non-numeric value encountered” will now throw a <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.typeerror.php">TypeError</a>. This mostly affects:</p>
<ul>
<li>Arithmetic operations</li>
<li>Bitwise operations</li>
</ul>
<p>This <code>E_WARNING</code> to <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.typeerror.php">TypeError</a> change also affects the <code>E_WARNING</code> “Illegal string offset ‘string’” for illegal string offsets. The behavior of explicit casts to int/float from strings has not been changed.</p>
</li>
<li>
<p>Magic Methods will now have their arguments and return types checked if they have them declared. The signatures should match the following list:</p>
<ul>
<li><code>__call(string $name, array $arguments): mixed</code></li>
<li><code>__callStatic(string $name, array $arguments): mixed</code></li>
<li><code>__clone(): void</code></li>
<li><code>__debugInfo(): ?array</code></li>
<li><code>__get(string $name): mixed</code></li>
<li><code>__invoke(mixed $arguments): mixed</code></li>
<li><code>__isset(string $name): bool</code></li>
<li><code>__serialize(): array</code></li>
<li><code>__set(string $name, mixed $value): void</code></li>
<li><code>__set_state(array $properties): object</code></li>
<li><code>__sleep(): array</code></li>
<li><code>__unserialize(array $data): void</code></li>
<li><code>__unset(string $name): void</code></li>
<li><code>__wakeup(): void</code></li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.call-user-func-array.php">call_user_func_array()</a> array keys will now be interpreted as parameter names, instead of being silently ignored.</p>
</li>
<li>
<p>Declaring a function called <code>assert()</code> inside a namespace is no longer allowed, and issues <code>E_COMPILE_ERROR</code>. The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.assert.php">assert()</a> function is subject to special handling by the engine, which may lead to inconsistent behavior when defining a namespaced function with the same name.</p>
</li>
<li>
<p>如果带有默认值的参数后面跟着一个必要的参数，那么默认值就会无效。这在 PHP 8.0.0 中已被废弃，通常可以通过删除默认值，不影响现有功能：</p>
<pre><code class="language-php">&lt;?php
function&nbsp;test($a&nbsp;=&nbsp;[],&nbsp;$b)&nbsp;{}&nbsp;//&nbsp;之前
function&nbsp;test($a,&nbsp;$b)&nbsp;{}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;之后
?&gt;
</code></pre>
<p>这条规则的一个例外是 <code>Type $param = null</code> 形式的参数，其中 null 的默认值使得类型隐式为空。这种用法仍然是允许的，但仍建议使用显式可空类型。</p>
<pre><code class="language-php">&lt;?php
function&nbsp;test(A&nbsp;$a&nbsp;=&nbsp;null,&nbsp;$b)&nbsp;{}&nbsp;//&nbsp;旧写法，仍可用
function&nbsp;test(?A&nbsp;$a,&nbsp;$b)&nbsp;{}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;推荐写法
?&gt;
</code></pre>
</li>
<li>
<p>参数 <code>exclude_disabled</code> 不能设置为 <code>false</code> 来调用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.get-defined-functions.php">get_defined_functions()</a>，该参数已被废弃，不再起作用。 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.get-defined-functions.php">get_defined_functions()</a> 绝不会再包含禁用的函数。</p>
</li>
</ul>
<h3 id="Resource-to-Object-Migration"><a class="header-anchor" href="#Resource-to-Object-Migration">¶</a>Resource to Object Migration</h3>
<p>Several <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.resource.php">资源(resource)</a>s have been migrated to objects. Return value checks using <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.is-resource.php">is_resource()</a> should be replaced with checks for <code>false</code>.</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/11/26/PHP-8-0-x/#more" rel="contents">
                阅读全文 »
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.tomhjx.top/2019/11/28/PHP-Version-7-4-0-Published/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="疯狂的茶几">
      <meta itemprop="description" content="懒人一个">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="疯狂的茶几">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/11/28/PHP-Version-7-4-0-Published/" class="post-title-link" itemprop="url">PHP Version 7.4.0 Published</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-11-28 15:00:00" itemprop="dateCreated datePublished" datetime="2019-11-28T15:00:00+08:00">2019-11-28</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2026-02-15 16:34:35" itemprop="dateModified" datetime="2026-02-15T16:34:35+08:00">2026-02-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>8.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>8 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="目标及关键路径"><a class="header-anchor" href="#目标及关键路径">¶</a>目标及关键路径</h1>
<ul>
<li>性能提升</li>
</ul>
<h1 id="从-PHP-7-3-x-移植到-PHP-7-4-x"><a class="header-anchor" href="#从-PHP-7-3-x-移植到-PHP-7-4-x">¶</a>从 PHP 7.3.x 移植到 PHP 7.4.x</h1>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration74.php">这里可以找到原文</a></p>
<h2 id="不向下兼容的变更"><a class="header-anchor" href="#不向下兼容的变更">¶</a>不向下兼容的变更</h2>
<ul>
<li>
<p>尝试以数组方式访问 null，bool， int，float 或 resource （例如 $null[“key”]）将会抛出 notice 通知。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.get-declared-classes.php">get_declared_classes()</a> 函数将不再返回匿名的类，假如它们没有被实例化的话。</p>
</li>
<li>
<p>fn 成为了保留关键词</p>
</li>
<li>
<p>文件尾部的 &lt;?php 标签（不包含空行）将会被解释成一个 PHP 头标签。</p>
</li>
<li>
<p>When using include/require on a stream, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/streamwrapper.stream-set-option.php">streamWrapper::stream_set_option()</a> will be invoked with the <strong><code>STREAM_OPTION_READ_BUFFER</code></strong> option.</p>
</li>
<li>
<p>序列化类型 o 被移除。因为它不是由 PHP 生成的，这可能会影响到之前项目中手动生成的序列化字符串。</p>
</li>
<li>
<p>密码哈希算法标识符现在是可空字符串，而不再是整数。</p>
<ul>
<li><strong><code>PASSWORD_DEFAULT</code></strong> 之前是 int 1; 现在是 <strong><code>null</code></strong></li>
<li><strong><code>PASSWORD_BCRYPT</code></strong> 之前是 int 1; 现在是 string ‘2y’</li>
<li><strong><code>PASSWORD_ARGON2I</code></strong> 之前是 int 2; 现在是 string ‘argon2i’</li>
<li><strong><code>PASSWORD_ARGON2ID</code></strong> 之前是 int 3; 现在是 string ‘argon2id’</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.htmlentities.php">htmlentities()</a> will now raise a notice (instead of a strict standards warning) if it is used with an encoding for which only basic entity substitution is supported, in which case it is equivalent to <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.htmlspecialchars.php">htmlspecialchars()</a>.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.fread.php">fread()</a> 和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.fwrite.php">fwrite()</a> 在操作失败的时候会返回 <strong><code>false</code></strong>。</p>
</li>
<li>
<p>BCMath functions will now warn if a non well-formed number is passed, such as “32foo”.</p>
</li>
<li>
<p>CURL</p>
<ul>
<li>Attempting to serialize a <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.curlfile.php">CURLFile</a> class will now generate an exception. Previously the exception was only thrown on unserialization.</li>
<li>Using CURLPIPE_HTTP1 is deprecated, and is no longer supported as of cURL 7.62.0.</li>
<li>The <code>$version</code> parameter of <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.curl-version.php">curl_version()</a> is deprecated. If any value not equal to the default CURLVERSION_NOW is passed, a warning is raised and the parameter is ignored.</li>
</ul>
</li>
<li>
<p>Date and Time</p>
<ul>
<li>
<p>Calling <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.var-dump.php">var_dump()</a> or similar on a <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.datetime.php">DateTime</a> or <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.datetimeimmutable.php">DateTimeImmutable</a> instance will no longer leave behind accessible properties on the object.</p>
</li>
<li>
<p>Comparison of <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.dateinterval.php">DateInterval</a> objects (using <code>==</code>, <code>&lt;</code>, and so on) will now generate a warning and always return <strong><code>false</code></strong>. Previously all <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.dateinterval.php">DateInterval</a> objects were considered equal, unless they had properties.</p>
</li>
</ul>
</li>
<li>
<p>The default parameter value of <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.idn-to-ascii.php">idn_to_ascii()</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.idn-to-utf8.php">idn_to_utf8()</a> is now <strong><code>INTL_IDNA_VARIANT_UTS46</code></strong> instead of the deprecated <strong><code>INTL_IDNA_VARIANT_2003</code></strong>.</p>
</li>
<li>
<p>MySQLi</p>
<ul>
<li>The embedded server functionality has been removed. It was broken since at least PHP 7.0.</li>
<li>The undocumented <code>mysqli::$stat</code> property has been removed in favor of <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/mysqli.stat.php">mysqli::stat()</a>.</li>
</ul>
</li>
<li>
<p>The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.openssl-random-pseudo-bytes.php">openssl_random_pseudo_bytes()</a> function will now throw an exception in error situations, similar to <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.random-bytes.php">random_bytes()</a>. In particular, an <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.error.php">Error</a> is thrown if the number of requested bytes is less than or equal to zero, and an <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.exception.php">Exception</a> is thrown if sufficient randomness cannot be gathered. The <code>$crypto_strong output</code> argument is guaranteed to always be <strong><code>true</code></strong> if the function does not throw, so explicitly checking it is not necessary.</p>
</li>
<li>
<p>When PREG_UNMATCHED_AS_NULL mode is used, trailing unmatched capturing groups will now also be set to null (or [null, -1] if offset capture is enabled). This means that the size of the $matches will always be the same.</p>
</li>
<li>
<p>Attempting to serialize a <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.pdo.php">PDO</a> or <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.pdostatement.php">PDOStatement</a> instance will now generate an <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.exception.php">Exception</a> rather than a <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.pdoexception.php">PDOException</a>, consistent with other internal classes which do not support serialization.</p>
</li>
<li>
<p>Reflection objects will now generate an exception if an attempt is made to serialize them. Serialization for reflection objects was never supported and resulted in corrupted reflection objects. It has been explicitly prohibited now.</p>
</li>
<li>
<p>Standard PHP Library (SPL)</p>
<ul>
<li>
<p>Calling <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.get-object-vars.php">get_object_vars()</a> on an <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.arrayobject.php">ArrayObject</a> instance will now always return the properties of the <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.arrayobject.php">ArrayObject</a> itself (or a subclass). Other affected operations are:</p>
<ul>
<li><strong>ReflectionObject::getProperties()</strong></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.reset.php">reset()</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.current.php">current()</a>, etc. Use <strong>Iterator</strong> methods instead.</li>
<li>Potentially others working on object properties as a list.</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/splpriorityqueue.setextractflags.php">SplPriorityQueue::setExtractFlags()</a> will throw an exception if zero is passed. Previously this would generate a recoverable fatal error on the next extraction operation.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.arrayobject.php">ArrayObject</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.arrayiterator.php">ArrayIterator</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.spldoublylinkedlist.php">SplDoublyLinkedList</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.splobjectstorage.php">SplObjectStorage</a> now support the <code>__serialize()</code> and <code>__unserialize()</code> mechanism in addition to the <strong>Serializable</strong> interface. This means that serialization payloads created on older PHP versions can still be unserialized, but new payloads created by PHP 7.4 will not be understood by older versions.</p>
</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.token-get-all.php">token_get_all()</a> will now emit a <strong><code>T_BAD_CHARACTER</code></strong> token for unexpected characters instead of leaving behind holes in the token stream.</p>
</li>
<li>
<p>从 PHP 7.4.11 开始，为了安全考虑，接受到的 Cookie 中的 names 参数不再被 URL 编码。</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>嵌套的三元操作中，必须明确使用显式括号来决定操作的顺序。</p>
</li>
<li>
<p>使用大括号访问数组及字符串索引的方式已被废弃。请使用 $var[$idx] 的语法来替代 $var{$idx}。</p>
</li>
<li>
<p><code>(real)</code> 类型已被废弃，请使用 <code>(float)</code> 来替代。</p>
</li>
<li>
<p>同时被废弃的还有 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.is-real.php">is_real()</a> 函数，请使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.is-float.php">is_float()</a> 来替代。</p>
</li>
<li>
<p>Unbinding $this of a non-static closure that uses $this is deprecated.</p>
</li>
<li>
<p>在没有父类的类中使用 parent 关键词已被废弃，并且在将来的 PHP 版本中将会抛出一个编译错误。目前只在运行时访问父类时才会产生错误。</p>
</li>
<li>
<p>配置文件中的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/filesystem.configuration.php#ini.allow-url-include">allow_url_include</a> 选项被废弃。如果启用了该选项，将会产生一个弃用通知。</p>
</li>
<li>
<p>在下面这些基础转换函数中，<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.base-convert.php">base_convert()</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.bindec.php">bindec()</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.octdec.php">octdec()</a> 和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.hexdec.php">hexdec()</a> 如果传入了非法字符，将会抛出一个弃用通知。函数会忽略掉无效字符后正常返回结果。前导空格和尾部空格，以及类型为 0x (取决于基数) 被允许传入。</p>
</li>
<li>
<p>在一个对象中使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.array-key-exists.php">array_key_exists()</a> 已被废弃。请使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.isset.php">isset()</a> 或 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.property-exists.php">property_exists()</a> 来替代。</p>
</li>
<li>
<p>魔术引号函数 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.get-magic-quotes-gpc.php">get_magic_quotes_gpc()</a> 和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.get-magic-quotes-runtime.php">get_magic_quotes_runtime()</a> 已被废弃。它们将永远返回 <strong><code>false</code></strong>。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.hebrevc.php">hebrevc()</a> 函数已被废弃。 可以用 <code>nl2br(hebrev($str))</code> 来替代，更好的方法是启用 Unicode RTL 来支持。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.convert-cyr-string.php">convert_cyr_string()</a> 函数已被废弃。可以用 <strong>mb_convert_string()</strong>， <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.iconv.php">iconv()</a> 或 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.uconverter.php">UConverter</a> 替代。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.money-format.php">money_format()</a> 函数已被废弃。 可以用更国际化的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.numberformatter.php">NumberFormatter</a> 功能来替代。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.ezmlm-hash.php">ezmlm_hash()</a> 函数已被废弃。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.restore-include-path.php">restore_include_path()</a> 函数已被废弃。可以用 <code>ini_restore('include_path')</code> 替代。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.implode.php">implode()</a> 允许反转参数顺序的特性已被废弃，请使用 <code>implode($glue, $parts)</code> 来替代 <code>implode($parts, $glue)</code>。</p>
</li>
<li>
<p>COM, 导入类型库的大小写不敏感的常量注册已被废弃。</p>
</li>
<li>
<p>FILTER_SANITIZE_MAGIC_QUOTES 已被废弃，使用 FILTER_SANITIZE_ADD_SLASHES 来替代。</p>
</li>
<li>
<p>Multibyte String</p>
<ul>
<li>
<p>Passing a non-string pattern to <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mb-ereg-replace.php">mb_ereg_replace()</a> is deprecated. Currently, non-string patterns are interpreted as ASCII codepoints. In PHP 8, the pattern will be interpreted as a string instead.</p>
</li>
<li>
<p>Passing the encoding as 3rd parameter to <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mb-strrpos.php">mb_strrpos()</a> is deprecated. Instead pass a 0 offset, and encoding as 4th parameter.</p>
</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.ldap-control-paged-result-response.php">ldap_control_paged_result_response()</a> 和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.ldap-control-paged-result.php">ldap_control_paged_result()</a> 函数已被废弃。控制页面操作可以使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.ldap-search.php">ldap_search()</a> 替代。</p>
</li>
<li>
<p>Reflection</p>
<ul>
<li>
<p>调用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/reflectiontype.tostring.php">ReflectionType::__toString()</a> 现在将会抛出一个弃用通知。 该方法从 PHP 7.1 开始，在 <strong>ReflectionNamedType::getName()</strong> 的文档中已经被声明废弃，但是由于技术原因，并没有抛出弃用通知。</p>
</li>
<li>
<p>The <code>export()</code> methods on all <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.reflection.php">Reflection</a> classes are deprecated.</p>
</li>
</ul>
</li>
<li>
<p>常量 <strong><code>AI_IDN_ALLOW_UNASSIGNED</code></strong> 和 <strong><code>AI_IDN_USE_STD3_ASCII_RULES</code></strong> 在 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.socket-addrinfo-lookup.php">socket_addrinfo_lookup()</a> 中不再可用，因为该常量在 glibc 中已被废弃。</p>
</li>
<li>
<p>这些扩展已经被转移到 PECL 中，不再是 PHP 发行版的一部分。这些扩展的 PECL 包版本将根据用户的需要来自行安装。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.ibase.php">Firebird/Interbase</a> - access to an InterBase and/or Firebird based database is still available with the PDO Firebird driver.</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.recode.php">Recode</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.wddx.php">WDDX</a></li>
</ul>
</li>
</ul>
<h2 id="新特性"><a class="header-anchor" href="#新特性">¶</a>新特性</h2>
<ul>
<li>
<p>类的属性中现在支持添加指定的类型。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/functions.arrow.php">箭头函数</a> 提供了一种更简洁的定义函数的方法。</p>
</li>
<li>
<p>有限返回类型协变与参数类型逆变</p>
</li>
<li>
<p>空合并运算符赋值</p>
</li>
<li>
<p>数组展开操作</p>
</li>
<li>
<p>数字文字可以在数字之间包含下划线。</p>
</li>
<li>
<p>Weak references allow the programmer to retain a reference to an object that does not prevent the object from being destroyed.</p>
</li>
<li>
<p>现在允许从 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.oop5.magic.php#object.tostring">__toString()</a> 抛出异常。之前的版本，将会导致一个致命错误。新版本中，之前发生致命错误的代码，已经被转换为 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.error.php">Error</a> 异常。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.curlfile.php">CURLFile</a> now supports stream wrappers in addition to plain file names, if the extension has been built against libcurl &gt;= 7.56.0.</p>
</li>
<li>
<p>The FILTER_VALIDATE_FLOAT filter now supports the min_range and max_range options, with the same semantics as FILTER_VALIDATE_INT.</p>
</li>
<li>
<p>FFI is a new extension, which provides a simple way to call native functions, access native variables, and create/access data structures defined in C libraries.</p>
</li>
<li>
<p>Added the IMG_FILTER_SCATTER image filter to apply a scatter filter to images.</p>
</li>
<li>
<p>Added crc32c hash using Castagnoli’s polynomial. This CRC32 variant is used by storage systems, such as iSCSI, SCTP, Btrfs and ext4.</p>
</li>
<li>
<p>Added the <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mb-str-split.php">mb_str_split()</a> function, which provides the same functionality as <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.str-split.php">str_split()</a>, but operating on code points rather than bytes.</p>
</li>
<li>
<p>新增 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/opcache.preloading.php">缓存预加载</a> 特性。</p>
</li>
<li>
<p>The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.preg-replace-callback.php">preg_replace_callback()</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.preg-replace-callback-array.php">preg_replace_callback_array()</a> functions now accept an additional <code>flags</code> argument, with support for the <strong><code>PREG_OFFSET_CAPTURE</code></strong> and <strong><code>PREG_UNMATCHED_AS_NULL</code></strong> flags. This influences the format of the matches array passed to to the callback function.</p>
</li>
<li>
<p>PDO</p>
<ul>
<li>
<p>The username and password can now be specified as part of the PDO DSN for the mysql, mssql, sybase, dblib, firebird and oci drivers. Previously this was only supported by the pgsql driver. If a username/password is specified both in the constructor and the DSN, the constructor takes precedence.</p>
</li>
<li>
<p>It is now possible to escape question marks in SQL queries to avoid them being interpreted as parameter placeholders. Writing ?? allows sending a single question mark to the database and e.g. use the PostgreSQL JSON key exists (?) operator.</p>
</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/pdostatement.getcolumnmeta.php">PDOStatement::getColumnMeta()</a> is now available.</p>
</li>
<li>
<p>PDO_SQLite</p>
<ul>
<li>
<p>PDOStatement::getAttribute(PDO::SQLITE_ATTR_READONLY_STATEMENT) allows checking whether the statement is read-only, i.e. if it doesn’t modify the database.</p>
</li>
<li>
<p>PDO::setAttribute(PDO::SQLITE_ATTR_EXTENDED_RESULT_CODES, true) enables the use of SQLite3 extended result codes in PDO::errorInfo() and PDOStatement::errorInfo().</p>
</li>
</ul>
</li>
<li>
<p>SQLite3</p>
<ul>
<li>
<p>Added <strong>SQLite3::lastExtendedErrorCode()</strong> to fetch the last extended result code.</p>
</li>
<li>
<p>Added <code>SQLite3::enableExtendedResultCodes($enable = true)</code>, which will make <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/sqlite3.lasterrorcode.php">SQLite3::lastErrorCode()</a> return extended result codes.</p>
</li>
</ul>
</li>
<li>
<p>Standard</p>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.strip-tags.php">strip_tags()</a> now also accepts an array of allowed tags: instead of <code>strip_tags($str, '&lt;a&gt;&lt;p&gt;')</code> you can now write <code>strip_tags($str, ['a', 'p'])</code>.</p>
</li>
<li>
<p>A new mechanism for custom object serialization has been added, which uses two new magic methods: __serialize and __unserialize.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.array-merge.php">array_merge()</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.array-merge-recursive.php">array_merge_recursive()</a> may now be called without any arguments, in which case they will return an empty array. This is useful in conjunction with the spread operator, e.g. <code>array_merge(...$arrays)</code>.</p>
</li>
<li>
<p>proc_open() function</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.proc-open.php">proc_open()</a> now accepts an array instead of a string for the command.</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.proc-open.php">proc_open()</a> now supports <code>redirect</code> and <code>null</code> descriptors.</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.password-hash.php">password_hash()</a> now has the argon2i and argon2id implementations from the sodium extension when PHP is built without libargon.</p>
</li>
</ul>
</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/11/28/PHP-Version-7-4-0-Published/#more" rel="contents">
                阅读全文 »
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.tomhjx.top/2018/12/06/PHP-Version-7-3-0-Published/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="疯狂的茶几">
      <meta itemprop="description" content="懒人一个">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="疯狂的茶几">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/12/06/PHP-Version-7-3-0-Published/" class="post-title-link" itemprop="url">PHP Version 7.3.0 Published</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-12-06 15:00:00" itemprop="dateCreated datePublished" datetime="2018-12-06T15:00:00+08:00">2018-12-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2026-02-15 16:34:35" itemprop="dateModified" datetime="2026-02-15T16:34:35+08:00">2026-02-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="目标及关键路径"><a class="header-anchor" href="#目标及关键路径">¶</a>目标及关键路径</h1>
<ul>
<li>性能提升</li>
</ul>
<h1 id="从-PHP-7-2-x-移植到-PHP-7-3-x"><a class="header-anchor" href="#从-PHP-7-2-x-移植到-PHP-7-3-x">¶</a>从 PHP 7.2.x 移植到 PHP 7.3.x</h1>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration73.php">这里可以找到原文</a></p>
<h2 id="不向下兼容的变更"><a class="header-anchor" href="#不向下兼容的变更">¶</a>不向下兼容的变更</h2>
<ul>
<li>
<p>Due to the introduction of <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration73.new-features.php#migration73.new-features.core.heredoc">flexible heredoc/nowdoc syntax</a>, doc strings that contain the ending label inside their body may cause syntax errors or change in interpretation.</p>
</li>
<li>
<p>Continue Targeting Switch issues Warning. <code>continue</code> statements targeting <code>switch</code> control flow structures will now generate a warning. In PHP such <code>continue</code> statements are equivalent to <code>break</code>, while they behave as <code>continue 2</code> in other languages.</p>
</li>
<li>
<p>Strict Interpretation of Integer String Keys on ArrayAccess. Array accesses of type <code>$obj["123"]</code>, where <code>$obj</code> implements <strong>ArrayAccess</strong> and <code>"123"</code> is an integer string literal will no longer result in an implicit conversion to integer, i.e., <code>$obj-&gt;offsetGet("123")</code> will be called instead of <code>$obj-&gt;offsetGet(123)</code>. This matches existing behavior for non-literals. The behavior of arrays is not affected in any way, they continue to implicitly convert integral string keys to integers.</p>
</li>
<li>
<p>In PHP, static properties are shared between inheriting classes, unless the static property is explicitly overridden in a child class. However, due to an implementation artifact it was possible to separate the static properties by assigning a reference. This loophole has been fixed.</p>
</li>
<li>
<p>References returned by array and property accesses are now unwrapped as part of the access. This means that it is no longer possible to modify the reference between the access and the use of the accessed value.</p>
</li>
<li>
<p>Argument unpacking stopped working with Traversables with non-integer keys. The following code worked in PHP 5.6-7.2 by accident.</p>
</li>
<li>
<p>The ext_skel utility has been completely redesigned with new options and some old options removed. This is now written in PHP and has no external dependencies.</p>
</li>
<li>
<p>Exceptions thrown due to automatic conversion of warnings into exceptions in <code>EH_THROW</code> mode (e.g. some <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.datetime.php">DateTime</a> exceptions) no longer populate <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.error-get-last.php">error_get_last()</a> state. As such, they now work the same way as manually thrown exceptions.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.typeerror.php">TypeError</a> now reports wrong types as <code>int</code> and <code>bool</code> instead of <code>integer</code> and <code>boolean</code>, respectively.</p>
</li>
<li>
<p>Undefined variables passed to <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.compact.php">compact()</a> will now be reported as a notice.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.getimagesize.php">getimagesize()</a> and related functions now report the mime type of BMP images as <code>image/bmp</code> instead of <code>image/x-ms-bmp</code>, since the former has been registered with the IANA (see <a target="_blank" rel="noopener" href="http://www.faqs.org/rfcs/rfc7903">»&nbsp;RFC 7903</a>).</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.stream-socket-get-name.php">stream_socket_get_name()</a> will now return IPv6 addresses wrapped in brackets. For example <code>"[::1]:1337"</code> will be returned instead of <code>"::1:1337"</code>.</p>
</li>
<li>
<p>Support for BeOS has been dropped.</p>
</li>
<li>
<p>BCMath Arbitrary Precision Mathematics</p>
<ul>
<li>
<p>All warnings thrown by <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/ref.bc.php">BCMath functions</a> are now using PHP’s error handling. Formerly some warnings have directly been written to stderr.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.bcmul.php">bcmul()</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.bcpow.php">bcpow()</a> now return numbers with the requested scale. Formerly, the returned numbers may have omitted trailing decimal zeroes.</p>
</li>
</ul>
</li>
<li>
<p>IMAP, POP3 and NNTP. <strong>rsh</strong>/<strong>ssh</strong> logins are disabled by default. Use <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/imap.configuration.php#ini.imap.enable-insecure-rsh">imap.enable_insecure_rsh</a> if you want to enable them. Note that the IMAP library does not filter mailbox names before passing them to the <strong>rsh</strong>/<strong>ssh</strong> command, thus passing untrusted data to this function with <strong>rsh</strong>/<strong>ssh</strong> enabled is insecure.</p>
</li>
<li>
<p>Due to added support for named captures, <code>mb_ereg_*()</code> patterns using named captures will behave differently. In particular named captures will be part of matches and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mb-ereg-replace.php">mb_ereg_replace()</a> will interpret additional syntax. See <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration73.new-features.php#migration73.new-features.mbstring.named-captures">Named Captures</a> for more information.</p>
</li>
<li>
<p>MySQL Improved Extension. Prepared statements now properly report the fractional seconds for DATETIME, TIME and TIMESTAMP columns with decimals specifier (e.g. TIMESTAMP(6) when using microseconds). Formerly, the fractional seconds part was simply omitted from the returned values.</p>
</li>
<li>
<p>Prepared statements now properly report the fractional seconds for <code>DATETIME</code>, <code>TIME</code> and <code>TIMESTAMP</code> columns with decimals specifier (e.g. <code>TIMESTAMP(6)</code> when using microseconds). Formerly, the fractional seconds part was simply omitted from the returned values. Please note that this only affects the usage of <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/ref.pdo-mysql.php">PDO_MYSQL</a> with emulated prepares turned off (e.g. using the native preparation functionality). Statements using connections having <strong><code>PDO::ATTR_EMULATE_PREPARES</code></strong>=<strong><code>true</code></strong> (which is the default) were not affected by the bug fixed and have already been getting the proper fractional seconds values from the engine.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.reflection.php">Reflection</a> export to string now uses <code>int</code> and <code>bool</code> instead of <code>integer</code> and <code>boolean</code>, respectively.</p>
</li>
<li>
<p>If an <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.spl.php">SPL</a> autoloader throws an exception, following autoloaders will not be executed. Previously all autoloaders were executed and exceptions were chained.</p>
</li>
<li>
<p>Mathematic operations involving <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.simplexml.php">SimpleXML</a> objects will now treat the text as an int or float, whichever is more appropriate. Previously values were treated as ints unconditionally.</p>
</li>
<li>
<p>As of PHP 7.3.23, the names of incoming cookies are no longer url-decoded for security reasons.</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>大小写不敏感的常量声明现已被废弃。将 <strong><code>true</code></strong> 作为第三个参数传递给 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.define.php">define()</a> 将会导致一个废弃警告。大小写不敏感的使用（在读取时使用一个与声明时不同的大小写方式）也已被废弃。</p>
</li>
<li>
<p>废弃：在一个命名空间中声明一个名为 <code>assert()</code> 的函数。 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.assert.php">assert()</a> 函数属于引擎特殊处理的情况，当在命名空间中使用相同名字去定义 函数时也许会导致不一致的行为。</p>
</li>
<li>
<p>废弃：将一个非字符串内容传递给字符串搜索函数。 在将来所有待搜索的内容都将被视为字符串，而不是 ASCII 编码值。如果需要依赖这个特性，你应该 要么显示地进行类型转换（转为字符串），或者显示地调用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.chr.php">chr()</a>。 以下是受到影响的方法：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.strpos.php">strpos()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.strrpos.php">strrpos()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.stripos.php">stripos()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.strripos.php">strripos()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.strstr.php">strstr()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.strchr.php">strchr()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.strrchr.php">strrchr()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.stristr.php">stristr()</a></li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.fgetss.php">fgetss()</a> 函数和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/filters.string.php">string.strip_tags stream filter</a> 已经被废弃。这同样影响了 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/splfileobject.fgetss.php">SplFileObject::fgetss()</a> 方法和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.gzgetss.php">gzgetss()</a> 函数。</p>
</li>
<li>
<p>对于 FILTER_FLAG_SCHEME_REQUIRED 和 FILTER_FLAG_HOST_REQUIRED 常量的显示使用已被废弃。 总之，FILTER_VALIDATE_URL 已经隐含了这两者。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.image2wbmp.php">image2wbmp()</a> 已被废弃。</p>
</li>
<li>
<p>如果 PHP 关联的ICU ≥ 56, 那么 Normalizer::NONE 形式的使用将会导致抛出一个废弃警告。</p>
</li>
<li>
<p>以下在文档中不存在的 <code>mbereg_*()</code> 别名已被废弃。请使用相应的 <code>mb_ereg_*()</code> 变体替代。</p>
<ul>
<li><strong>mbregex_encoding()</strong></li>
<li><strong>mbereg()</strong></li>
<li><strong>mberegi()</strong></li>
<li><strong>mbereg_replace()</strong></li>
<li><strong>mberegi_replace()</strong></li>
<li><strong>mbsplit()</strong></li>
<li><strong>mbereg_match()</strong></li>
<li><strong>mbereg_search()</strong></li>
<li><strong>mbereg_search_pos()</strong></li>
<li><strong>mbereg_search_regs()</strong></li>
<li><strong>mbereg_search_init()</strong></li>
<li><strong>mbereg_search_getregs()</strong></li>
<li><strong>mbereg_search_getpos()</strong></li>
<li><strong>mbereg_search_setpos()</strong></li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/ref.pdo-odbc.php#ini.pdo-odbc.db2-instance-name">pdo_odbc.db2_instance_name</a> ini 设置项在先前已被废弃。 它在文档中自 PHP 5.1.1 起被废弃</p>
</li>
</ul>
<h2 id="新特性"><a class="header-anchor" href="#新特性">¶</a>新特性</h2>
<ul>
<li>
<p>Heredoc 和 Nowdoc 语法变的更灵活。现在支持闭合标记符的缩进，并且不再强制闭合标记符的换行。</p>
</li>
<li>
<p>Array destructuring now supports reference assignments using the syntax <code>[&amp;$a, [$b, &amp;$c]] = $d</code>. The same is also supported for <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.list.php">list()</a>.</p>
</li>
<li>
<p>instanceof now allows literals as the first operand, in which case the result is always false.</p>
</li>
<li>
<p>CompileError Exception instead of some Compilation Errors</p>
</li>
<li>
<p>Trailing commas in function and method calls are now allowed.</p>
</li>
<li>
<p>New options have been added to customize the FPM logging:</p>
<ul>
<li>log_limit</li>
<li>log_buffering</li>
<li>decorate_workers_output</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.bcscale.php">bcscale()</a> can now also be used as getter to retrieve the current scale in use.</p>
</li>
<li>
<p>Full support for LDAP Controls has been added to the <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.ldap.php">LDAP</a> querying functions and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.ldap-parse-result.php">ldap_parse_result()</a></p>
</li>
<li>
<p>Multibyte String Functions</p>
<ul>
<li>
<p>Support for full case-mapping and case-folding has been added. Unlike simple case-mapping, full case-mapping may change the length of the string.</p>
</li>
<li>
<p>Case-insensitive string operations now use case-folding instead of case- mapping during comparisons. This means that more characters will be considered (case insensitively) equal now.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mb-convert-case.php">mb_convert_case()</a> with <strong><code>MB_CASE_TITLE</code></strong> now performs title-case conversion based on the Cased and CaseIgnorable derived Unicode properties. In particular this also improves handling of quotes and apostrophes.</p>
</li>
<li>
<p>The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.mbstring.php">Multibyte String</a> data tables have been updated for Unicode 11.</p>
</li>
<li>
<p>The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/ref.mbstring.php">Multibyte String Functions</a> now correctly support strings larger than 2GB.</p>
</li>
<li>
<p>Performance of the <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.mbstring.php">Multibyte String</a> extension has been significantly improved across the board. The largest improvements are in case conversion functions.</p>
</li>
<li>
<p>The mb_ereg_* functions now support named captures.</p>
</li>
</ul>
</li>
<li>
<p>Support for the <code>completion_append_character</code> and <code>completion_suppress_append</code> options has been added to <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.readline-info.php">readline_info()</a>. These options are only available if PHP is linked against libreadline (rather than libedit).</p>
</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/12/06/PHP-Version-7-3-0-Published/#more" rel="contents">
                阅读全文 »
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.tomhjx.top/2017/11/30/PHP-Version-7-2-0-Published/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="疯狂的茶几">
      <meta itemprop="description" content="懒人一个">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="疯狂的茶几">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/11/30/PHP-Version-7-2-0-Published/" class="post-title-link" itemprop="url">PHP Version 7.2.0 Published</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-11-30 15:00:00" itemprop="dateCreated datePublished" datetime="2017-11-30T15:00:00+08:00">2017-11-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2026-02-15 16:34:35" itemprop="dateModified" datetime="2026-02-15T16:34:35+08:00">2026-02-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>14k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>13 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="目标及关键路径"><a class="header-anchor" href="#目标及关键路径">¶</a>目标及关键路径</h1>
<ul>
<li>性能提升</li>
</ul>
<h1 id="从-PHP-7-1-x-移植到-PHP-7-2-x"><a class="header-anchor" href="#从-PHP-7-1-x-移植到-PHP-7-2-x">¶</a>从 PHP 7.1.x 移植到 PHP 7.2.x</h1>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration72.php">这里可以找到原文</a></p>
<h2 id="不向下兼容的变更"><a class="header-anchor" href="#不向下兼容的变更">¶</a>不向下兼容的变更</h2>
<ul>
<li>
<p>防止 number_format() 返回负零，之前版本中，<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.number-format.php">number_format()</a> 有可能会返回 <code>-0</code>。虽然这是符合 IEEE 754 规范的，但是这样会导致可读性不好，新版本中会将这样的负数去掉。</p>
</li>
<li>
<p>将数组转换为对象，或将对象转换为数组时，数字键现在得到了更好的处理（无论是通过显式转换还是通过 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.settype.php">settype()</a> 函数）。</p>
</li>
<li>
<p>get_class() 函数不再接受 null 参数，之前版本中，传递 <strong><code>null</code></strong> 给 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.get-class.php">get_class()</a> 函数将返回当前类名。在新版本中，此行为会抛出一个 <strong><code>E_WARNING</code></strong> 错误。如果想实现与之前版本同样的效果，请不要传递任何参数进来。</p>
</li>
<li>
<p>对非可数类型调用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.count.php">count()</a>（或 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.sizeof.php">sizeof()</a>）函数，会抛出一个 <strong><code>E_WARNING</code></strong> 错误。</p>
</li>
<li>
<p>ext/hash 从资源变成对象</p>
</li>
<li>
<p>SSL/TLS 的下列默认选项被修改：</p>
<ul>
<li><code>tls://</code> 默认为 TLSv1.0 or TLSv1.1 or TLSv1.2</li>
<li><code>ssl://</code> 成为 <code>tls://</code> 的别名</li>
<li><code>STREAM_CRYPTO_METHOD_TLS_*</code> 常量默认为 TLSv1.0 或 TLSv1.1 + TLSv1.2，替代之前的 TLSv1.0</li>
</ul>
</li>
<li>
<p>之前版本中，如果在一个闭包资源中使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.gettype.php">gettype()</a> 会返回字符串 <code>"unknown type"</code>，现在将会返回字符 <code>"resource (closed)"</code>。</p>
</li>
<li>
<p>之前版本中，对 <strong>__PHP_Incomplete_Class</strong> 调用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.is-object.php">is_object()</a> 函数会返回 <strong><code>false</code></strong>，现在会返回 <strong><code>true</code></strong>。</p>
</li>
<li>
<p>调用未定义的常量，现在会抛出一个 <strong><code>E_WARNING</code></strong> 错误(之前版本中为 <strong><code>E_NOTICE</code></strong>)。在下一个 PHP 大版本中，将会抛出一个 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.error.php">Error</a> 错误。</p>
</li>
<li>
<p>官方支持的最低 Windows 版本为 Windows 7/Server 2008 R2。</p>
</li>
<li>
<p>Compatibility checks upon default trait property values will no longer perform casting.</p>
</li>
<li>
<p>object 在之前的 PHP 7.0 版本 中被声明为软保留字（soft-reserved）。现在变更为强制保留字，禁止在任何类或接口中使用该名称。</p>
</li>
<li>
<p>NetWare 已不再被支持。</p>
</li>
<li>
<p>While <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.array-unique.php">array_unique()</a> with <strong><code>SORT_STRING</code></strong> formerly copied the array and removed non-unique elements (without packing the array afterwards), now a new array is built by adding the unique elements. This can result in different numeric indexes.</p>
</li>
<li>
<p>The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.bcmod.php">bcmod()</a> function no longer truncates fractional numbers to integers. As such, its behavior now follows <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.fmod.php">fmod()</a>, rather than the <code>%</code> operator. For example <code>bcmod('4', '3.5')</code> now returns <code>0.5</code> instead of <code>1</code>.</p>
</li>
<li>
<p>The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.hash-hmac.php">hash_hmac()</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.hash-hmac-file.php">hash_hmac_file()</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.hash-pbkdf2.php">hash_pbkdf2()</a>, and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.hash-init.php">hash_init()</a> (with <strong><code>HASH_HMAC</code></strong>) functions no longer accept non-cryptographic hashes.</p>
</li>
<li>
<p>The <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.json-decode.php">json_decode()</a> function option, <strong><code>JSON_OBJECT_AS_ARRAY</code></strong>, is now used if the second parameter (assoc) is <strong><code>null</code></strong>. Previously, <strong><code>JSON_OBJECT_AS_ARRAY</code></strong> was always ignored.</p>
</li>
<li>
<p>Sequences generated by <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.rand.php">rand()</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mt-rand.php">mt_rand()</a> for a specific seed may differ from PHP 7.1 on 64-bit machines (due to the fixing of a modulo bias bug in the implementation).</p>
</li>
<li>
<p>sql.safe_mode ini 设置项已被移除。</p>
</li>
<li>
<p>The <code>zone</code> element of the array returned by <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.date-parse.php">date_parse()</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.date-parse-from-format.php">date_parse_from_format()</a> represents seconds instead of minutes now, and its sign is inverted. For instance <code>-120</code> is now <code>7200</code>.</p>
</li>
<li>
<p>As of PHP 7.2.34, the names of incoming cookies are no longer url-decoded for security reasons.</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>不带引号的字符串是不存在的全局常量，转化成他们自身的字符串。 在以前，该行为会产生 <strong><code>E_NOTICE</code></strong>，但现在会产生 <strong><code>E_WARNING</code></strong>。在下一个 PHP 主版本中，将抛出 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.error.php">Error</a> 异常。</p>
</li>
<li>
<p>GD 扩展内的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.png2wbmp.php">png2wbmp()</a> 和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.jpeg2wbmp.php">jpeg2wbmp()</a> 现已被废弃，将在下一个 PHP 主版本中移除。</p>
</li>
<li>
<p>Intl 扩展废弃了 <strong><code>INTL_IDNA_VARIANT_2003</code></strong> 转化，为<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.idn-to-ascii.php">idn_to_ascii()</a> 和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.idn-to-utf8.php">idn_to_utf8()</a> 的默认选项。 PHP 7.4 会把默认值设置为 <strong><code>INTL_IDNA_VARIANT_UTS46</code></strong>， 并在下一个 PHP 主版本中完全移除 <strong><code>INTL_IDNA_VARIANT_2003</code></strong>。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.autoload.php">__autoload()</a> 方法已被废弃， 因为和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.spl-autoload-register.php">spl_autoload_register()</a> 相比功能较差 (因为无法链式处理多个 autoloader)， 而且也无法在两种 autoloading 样式中配合使用。</p>
</li>
<li>
<p>当开启了 <code>track_errors</code> ini 设置，出现非致命错误时， 会在本地作用域创建 <code>$php_errormsg</code> 变量。 由于提供了更好的方式： <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.error-get-last.php">error_get_last()</a> 来获取此类错误信息，该功能被废弃。</p>
</li>
<li>
<p>考虑到create_function() 函数的安全隐患问题（它是 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.eval.php">eval()</a> 的瘦包装器），该过时的函数现在已被废弃。 更好的选择是<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/functions.anonymous.php">匿名函数</a>。</p>
</li>
<li>
<p>mbstring.func_overload ini 设置，由于此设置会影响环境中的字符串系列函数，带来相互操作中的问题，它现在已被废弃。</p>
</li>
<li>
<p>转化任意表达式为(unset)类型，结果总是 null，所以这个多余的类型转化现在也就被废弃了。</p>
</li>
<li>
<p>使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.parse-str.php">parse_str()</a> 时，不加第二个参数会导致查询字符串参数导入当前符号表。 考虑到安全隐患问题，不加第二个参数使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.parse-str.php">parse_str()</a> 的行为已被废弃。 此函数的第二个选项为必填项，它使查询字符串转为 Array。</p>
</li>
<li>
<p>此函数基于未知的、取决于平台的 limb 尺寸产生随机数。因此，该函数已被废弃。 使用更好的方式产生随机数： GMP 扩展中的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.gmp-random-bits.php">gmp_random_bits()</a> 和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.gmp-random-range.php">gmp_random_range()</a>。</p>
</li>
<li>
<p>使用each() 函数遍历时，比普通的 foreach 更慢， 并且给新语法的变化带来实现问题。因此它被废弃了。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.assert.php">assert()</a> 字符串参数将要求它能被 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.eval.php">eval()</a> 执行。 考虑到可能被执行远程代码，废弃了字符串的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.assert.php">assert()</a>，最好提供 bool 的表达式。</p>
</li>
<li>
<p>$errcontext 参数包含了错误网站的所有本地变量。 考虑到它很少被用到，而且还会导致内部优化问题，它现在被废弃了。 代替用法：调试器应该自己取回错误站点的本地变量。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.read-exif-data.php">read_exif_data()</a> 别名已被废弃 使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.exif-read-data.php">exif_read_data()</a> 函数代替。</p>
</li>
</ul>
<h2 id="新特性"><a class="header-anchor" href="#新特性">¶</a>新特性</h2>
<ul>
<li>
<p>这种新的对象类型, object, 引进了可用于逆变（contravariant）参数输入和协变（covariant）返回任何对象类型。</p>
</li>
<li>
<p>扩展文件不再需要通过文件加载 (Unix下以<code>.so</code>为文件扩展名，在Windows下以 <code>.dll</code> 为文件扩展名) 进行指定。可以在php.ini配置文件进行启用, 也可以使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.dl.php">dl()</a> 函数进行启用。</p>
</li>
<li>
<p>当一个抽象类继承于另外一个抽象类的时候，继承后的抽象类可以重写被继承的抽象类的抽象方法。</p>
</li>
<li>
<p>使用Argon2算法生成密码散列，Argon2 已经被加入到密码散列（password hashing） API (这些函数以 <code>password_</code> 开头), 以下是暴露出来的常量:</p>
<ul>
<li><strong><code>PASSWORD_ARGON2I</code></strong></li>
<li><strong><code>PASSWORD_ARGON2_DEFAULT_MEMORY_COST</code></strong></li>
<li><strong><code>PASSWORD_ARGON2_DEFAULT_TIME_COST</code></strong></li>
<li><strong><code>PASSWORD_ARGON2_DEFAULT_THREADS</code></strong></li>
</ul>
</li>
<li>
<p>新增 ext/PDO（PDO扩展） 字符串扩展类型，当你准备支持多语言字符集，PDO的字符串类型已经扩展支持国际化的字符集。以下是扩展的常量：</p>
<ul>
<li><strong><code>PDO::PARAM_STR_NATL</code></strong></li>
<li><strong><code>PDO::PARAM_STR_CHAR</code></strong></li>
<li><strong><code>PDO::ATTR_DEFAULT_STR_PARAM</code></strong></li>
</ul>
</li>
<li>
<p>为 ext/PDO新增额外的模拟调试信息，<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/pdostatement.debugdumpparams.php">PDOStatement::debugDumpParams()</a>方法已经更新，当发送SQL到数据库的时候，在一致性、行查询（包括替换绑定占位符）将会显示调试信息。这一特性已经加入到模拟调试中（在模拟调试打开时可用）。</p>
</li>
<li>
<p>LDAP 扩展已经新增了EXOP支持. 扩展暴露以下函数和常量:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.ldap-parse-exop.php">ldap_parse_exop()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.ldap-exop.php">ldap_exop()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.ldap-exop-passwd.php">ldap_exop_passwd()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.ldap-exop-whoami.php">ldap_exop_whoami()</a></li>
<li><strong><code>LDAP_EXOP_START_TLS</code></strong></li>
<li><strong><code>LDAP_EXOP_MODIFY_PASSWD</code></strong></li>
<li><strong><code>LDAP_EXOP_REFRESH</code></strong></li>
<li><strong><code>LDAP_EXOP_WHO_AM_I</code></strong></li>
<li><strong><code>LDAP_EXOP_TURN</code></strong></li>
</ul>
</li>
<li>
<p>sockets扩展现在具有查找地址信息的能力，且可以连接到这个地址，或者进行绑定和解析。为此添加了以下一些函数:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.socket-addrinfo-lookup.php">socket_addrinfo_lookup()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.socket-addrinfo-connect.php">socket_addrinfo_connect()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.socket-addrinfo-bind.php">socket_addrinfo_bind()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.socket-addrinfo-explain.php">socket_addrinfo_explain()</a></li>
</ul>
</li>
<li>
<p>重写方法和接口实现的参数类型现在可以省略了。不过这仍然是符合LSP，因为现在这种参数类型是逆变的。</p>
</li>
<li>
<p>命名空间可以在PHP 7中使用尾随逗号进行分组引入。</p>
</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/11/30/PHP-Version-7-2-0-Published/#more" rel="contents">
                阅读全文 »
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.tomhjx.top/2016/12/01/PHP-Version-7-1-0-Published/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="疯狂的茶几">
      <meta itemprop="description" content="懒人一个">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="疯狂的茶几">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/12/01/PHP-Version-7-1-0-Published/" class="post-title-link" itemprop="url">PHP Version 7.1.0 Published</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2016-12-01 15:06:06" itemprop="dateCreated datePublished" datetime="2016-12-01T15:06:06+08:00">2016-12-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2026-02-15 16:34:35" itemprop="dateModified" datetime="2026-02-15T16:34:35+08:00">2026-02-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>30k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>27 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="目标及关键路径"><a class="header-anchor" href="#目标及关键路径">¶</a>目标及关键路径</h1>
<ul>
<li>提升性能
<ul>
<li>New SSA based optimization framework (embedded into opcache)</li>
<li>Global optimization of PHP bytecode based on type inference</li>
<li>Highly specialized VM opcode handlers</li>
</ul>
</li>
</ul>
<h1 id="从-PHP-7-0-x-移植到-PHP-7-1-x"><a class="header-anchor" href="#从-PHP-7-0-x-移植到-PHP-7-1-x">¶</a>从 PHP 7.0.x 移植到 PHP 7.1.x</h1>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration71.php">这里可以找到原文</a></p>
<h2 id="不向后兼容的变更"><a class="header-anchor" href="#不向后兼容的变更">¶</a>不向后兼容的变更</h2>
<ul>
<li>
<p>当传递参数过少时将抛出错误</p>
</li>
<li>
<p>Dynamic calls for certain functions have been forbidden (in the form of <code>$func()</code> or <code>array_map('extract', ...)</code>, etc). These functions either inspect or modify another scope, and present with them ambiguous and unreliable behavior. The functions are as follows:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.assert.php">assert()</a> - with a string as the first argument</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.compact.php">compact()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.extract.php">extract()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.func-get-args.php">func_get_args()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.func-get-arg.php">func_get_arg()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.func-num-args.php">func_num_args()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.get-defined-vars.php">get_defined_vars()</a></li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mb-parse-str.php">mb_parse_str()</a> - with one arg</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.parse-str.php">parse_str()</a> - with one arg</li>
</ul>
</li>
<li>
<p>The following names cannot be used to name classes, interfaces, or traits:</p>
<ul>
<li>void</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.iterable.php">iterable</a></li>
</ul>
</li>
<li>
<p>Integer operations and conversions on numerical strings now respect scientific notation. This also includes the <code>(int)</code> cast operation, and the following functions: <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.intval.php">intval()</a> (where the base is 10), <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.settype.php">settype()</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.decbin.php">decbin()</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.decoct.php">decoct()</a>, and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.dechex.php">dechex()</a>.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mt-rand.php">mt_rand()</a> will now default to using the fixed version of the Mersenne Twister algorithm. If deterministic output from <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mt-srand.php">mt_srand()</a> was relied upon, then the <strong><code>MT_RAND_PHP</code></strong> with the ability to preserve the old (incorrect) implementation via an additional optional second parameter to <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mt-srand.php">mt_srand()</a>.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.rand.php">rand()</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.srand.php">srand()</a> have now been made aliases to <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mt-rand.php">mt_rand()</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mt-srand.php">mt_srand()</a>, respectively. This means that the output for the following functions have changed: <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.rand.php">rand()</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.shuffle.php">shuffle()</a>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.str-shuffle.php">str_shuffle()</a>, and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.array-rand.php">array_rand()</a>.</p>
</li>
<li>
<p>The ASCII delete control character (0x7F) can no longer be used in identifiers that are not quoted.</p>
</li>
<li>
<p>If the <code>error_log</code> ini setting is set to <code>syslog</code>, the PHP error levels are mapped to the syslog error levels. This brings finer differentiation in the error logs in contrary to the previous approach where all the errors are logged with the notice level only.</p>
</li>
<li>
<p>对于在执行构造方法时抛出异常的对象，现在析构方法绝不会被调用。在先前的版本中，这个行为取决于对象是否在构造方法以外的地方呗引用（例如一个错误堆栈回溯）</p>
</li>
<li>
<p>call_user_func()不再支持对传址的函数的调用</p>
</li>
<li>
<p>对字符串使用一个空索引操作符（例如$str[] = $x）将会抛出一个致命错误， 而不是静默地将其转为一个数组。</p>
</li>
<li>
<p>下列ini配置项已经被移除：</p>
<ul>
<li><code>session.entropy_file</code></li>
<li><code>session.entropy_length</code></li>
<li><code>session.hash_function</code></li>
<li><code>session.hash_bits_per_character</code></li>
</ul>
</li>
<li>
<p>The order of the elements in an array has changed when those elements have been automatically created by referencing them in a by reference assignment.</p>
</li>
<li>
<p>The internal sorting algorithm has been improved, what may result in different sort order of elements, which compare as equal, than before.</p>
</li>
<li>
<p>The error message for E_RECOVERABLE errors has been changed from “Catchable fatal error” to “Recoverable fatal error”.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.datetime.php">DateTime</a> and <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.datetimeimmutable.php">DateTimeImmutable</a> now properly incorporate microseconds when constructed from the current time, either explicitly or with a relative string (e.g. <code>"first day of next month"</code>). This means that naive comparisons of two newly created instances will now more likely return <strong><code>false</code></strong> instead of <strong><code>true</code></strong>:</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration71.incompatible.php#migration71.incompatible.fatal-errors-to-error-exceptions">Fatal errors to Error exceptions conversions</a></p>
</li>
<li>
<p>Variables bound to a <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/functions.anonymous.php">closure</a> via the <code>use</code> construct cannot use the same name as any <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.variables.predefined.php">superglobals</a>, $this, or any parameter.</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.long2ip.php">long2ip()</a> now expects an int instead of a string.</p>
</li>
<li>
<p>JSON encoding and decoding</p>
<ul>
<li>
<p>The <code>serialize_precision</code> ini setting now controls the serialization precision when encoding doubles.</p>
</li>
<li>
<p>Decoding an empty key now results in an empty property name, rather than <em>empty</em> as a property name.</p>
</li>
</ul>
</li>
<li>
<p>Drop support for the sslv2 stream</p>
</li>
<li>
<p>Return statements without argument in functions which declare a return type now trigger E_COMPILE_ERROR (unless the return type is declared as void), even if the return statement would never be reached.</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>mcrypt 扩展已经过时了大约10年，并且用起来很复杂。因此它被废弃并且被 OpenSSL 所取代。 从PHP 7.2起它将被从核心代码中移除并且移到PECL中。</p>
</li>
<li>
<p>对于<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mb-ereg-replace.php">mb_ereg_replace()</a>和<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mb-eregi-replace.php">mb_eregi_replace()</a>的 <code>e</code>模式修饰符现在已被废弃。</p>
</li>
</ul>
<h2 id="新特性"><a class="header-anchor" href="#新特性">¶</a>新特性</h2>
<ul>
<li>
<p>参数以及返回值的类型现在可以通过在类型前加上一个问号使之允许为空。 当启用这个特性时，传入的参数或者函数返回的结果要么是给定的类型，要么是 null 。</p>
</li>
<li>
<p>一个新的返回值类型void被引入。 返回值声明为 void 类型的方法要么干脆省去 return 语句，要么使用一个空的 return 语句。 对于 void 函数来说，null 不是一个合法的返回值。</p>
</li>
<li>
<p>短数组语法（<code>[]</code>）现在作为<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.list.php">list()</a>语法的一个备选项，可以用于将数组的值赋给一些变量（包括在<code>foreach</code>中）。</p>
</li>
<li>
<p>现在起支持设置类常量的可见性。</p>
</li>
<li>
<p>现在引入了一个新的被称为<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.iterable.php">iterable</a>的伪类 (与<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.callable.php">callable</a>类似)。 这可以被用在参数或者返回值类型中，它代表接受数组或者实现了<strong>Traversable</strong>接口的对象。 至于子类，当用作参数时，子类可以收紧父类的<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.iterable.php">iterable</a>类型到array 或一个实现了<strong>Traversable</strong>的对象。对于返回值，子类可以拓宽父类的 array或对象返回值类型到<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.iterable.php">iterable</a>。</p>
</li>
<li>
<p>一个catch语句块现在可以通过管道字符(|)来实现多个异常的捕获。 这对于需要同时处理来自不同类的不同异常时很有用。</p>
</li>
<li>
<p>现在<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.list.php">list()</a>和它的新的<code>[]</code>语法支持在它内部去指定键名。这意味着它可以将任意类型的数组 都赋值给一些变量（与短数组语法类似）</p>
</li>
<li>
<p>现在所有支持偏移量的<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.strings.php">字符串操作函数</a> 都支持接受负数作为偏移量，包括通过<code>[]</code>或<code>{}</code>操作<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.substr">字符串下标</a>。在这种情况下，一个负数的偏移量会被理解为一个从字符串结尾开始的偏移量。</p>
</li>
<li>
<p>通过给<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.openssl-encrypt.php">openssl_encrypt()</a>和<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.openssl-decrypt.php">openssl_decrypt()</a> 添加额外参数，现在支持了AEAD (模式 GCM and CCM)。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.closure.php">Closure</a>新增了一个静态方法，用于将<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.callable.php">callable</a>快速地 转为一个<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.closure.php">Closure</a> 对象。</p>
</li>
<li>
<p>一个新的名为 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.pcntl-async-signals.php">pcntl_async_signals()</a> 的方法现在被引入， 用于启用无需 ticks （这会带来很多额外的开销）的异步信号处理。</p>
</li>
<li>
<p>对服务器推送的支持现在已经被加入到 CURL 扩展中（ 需要版本 7.46 或更高）。这个可以通过 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.curl-multi-setopt.php">curl_multi_setopt()</a> 函数与新的常量 <strong><code>CURLMOPT_PUSHFUNCTION</code></strong> 来进行调节。常量 <strong><code>CURL_PUST_OK</code></strong> 和 <strong><code>CURL_PUSH_DENY</code></strong> 也已经被添加进来，以便服务器推送的回调函数来表明自己会同意或拒绝处理。</p>
</li>
<li>
<p>新增 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/context.socket.php#context.socket.tcp_nodelay">tcp_nodelay</a> 选项。</p>
</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2016/12/01/PHP-Version-7-1-0-Published/#more" rel="contents">
                阅读全文 »
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.tomhjx.top/2015/12/03/PHP-Version-7-0-0-Published/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="疯狂的茶几">
      <meta itemprop="description" content="懒人一个">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="疯狂的茶几">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/12/03/PHP-Version-7-0-0-Published/" class="post-title-link" itemprop="url">PHP Version 7.0.0 Published</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-12-03 15:00:00" itemprop="dateCreated datePublished" datetime="2015-12-03T15:00:00+08:00">2015-12-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2026-02-15 16:34:35" itemprop="dateModified" datetime="2026-02-15T16:34:35+08:00">2026-02-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>31k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>28 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="目标及关键路径"><a class="header-anchor" href="#目标及关键路径">¶</a>目标及关键路径</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.laruence.com/2015/12/04/3083.html">提升性能，预期提升30%+，实际提升了100%+</a>
<ul>
<li>降低内存占用, 提高缓存友好性, 降低执行的指令数
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://www.laruence.com/2018/04/08/3170.html">优化ZVAL</a></p>
<ul>
<li>
<p>ZVAL这个结构体的大小是(在64位系统)24个字节，在zval.value联合体中, zend_object_value是最大的长板, 它导致整个value需要16个字节</p>
<ul>
<li>优化结构，在64位环境下,现在只需要16个字节</li>
</ul>
</li>
<li>
<p>PHP中大量的结构体都是基于Hashtable实现的, 增删改查Hashtable的操作占据了大量的CPU时间, 而字符串要查找首先要求它的Hash值</p>
<ul>
<li>把一个字符串的Hash值计算好以后, 就存下来, 避免再次计算</li>
</ul>
</li>
<li>
<p>PHP的zval大部分都是按值传递, 写时拷贝的值, 但是有俩个例外, 就是对象和资源, 他们永远都是按引用传递, 这样就造成一个问题, 对象和资源在除了zval中的引用计数以外, 还需要一个全局的引用计数, 这样才能保证内存可以回收. 所以在PHP5的时代, 以对象为例, 它有俩套引用计数, 一个是zval中的, 另外一个是obj自身的计数。在获取object时，经过漫长的多次内存读取, 才能获取到真正的objec对象本身，效率低</p>
<ul>
<li>对于在zval的value字段中能保存下的值, 就不再对他们进行引用计数了, 而是在拷贝的时候直接赋值, 这样就省掉了大量的引用计数相关的操作</li>
<li>标志位，方便判断是否需要进行引用计数</li>
<li>PHP7中在取一个对象的类的时候，就会非常方便了, 直接zvalu.value.obj-&gt;ce即可，一些类所自定的handler也就可以很便捷的访问到了</li>
</ul>
</li>
<li>
<p>因为引用计数是作用在zval的, 那么就会导致如果要拷贝一个字符串类型的zval, 我们别无他法只能复制这个字符串</p>
<ul>
<li>用value来保存一个指针, 这个指针指向这个具体的值, 引用计数也随之作用于这个值上, 而不在是作用于zval上了.</li>
</ul>
</li>
<li>
<p>PHP5的时代, 采用的是写时分离，同一个变量，只要曾经被引用过，再被赋值，就会触发变量复制（分离），拖慢性能</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.laruence.com/2018/04/08/3179.html">zval不存储引用计数，而独立了zend_reference来表示引用，所以zval不存在写时复制</a></li>
</ul>
</li>
<li>
<p>zval在PHP5的时代，也常作为临时变量来高频使用，并在使用过程中也会在堆内存分配给它</p>
<ul>
<li>zval预先分配，移除了MAKE_STD_ZVAL/ALLOC_ZVAL宏, 不再支持存堆内存上申请zval. 函数内部使用的zval要么来自外面输入, 要么使用在栈上分配的临时zval</li>
</ul>
</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.laruence.com/2020/02/25/3182.html">优化HashTable</a></p>
<ul>
<li>Hashtable在PHP中，应用最多的是保存各种zval, 而PHP5的HashTable设计的太通用
<ul>
<li>可以设计为专门为了存储zval而优化, 从而能减少内存占用。</li>
<li>通过基于位操作来设计存储方案，节省内存</li>
</ul>
</li>
<li>缓存局部性问题， 因为PHP5的Hashtable的Bucket，包括zval都是独立分配的，并且采用了List来串Hashtable中的所有元素，会导致在遍历或者顺序访问一个数组的时候，缓存不友好。
<ul>
<li>数据独立保存到一个连续数组，遍历时就可以顺序访问一块连续的内存,zval直接保存到数组元素中，在绝大部分情况下（不需要外部指针的内容，比如long，bool之类的）就可以不需要任何额外的zval指针解引用了，缓存局部性友好</li>
</ul>
</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.laruence.com/2020/03/23/5605.html">优化OBJECT</a></p>
<ul>
<li>在PHP5中，只有resource和object是引用传递，也就是说在赋值，传递的时候都是传递的本身，也正因为如此，Object和Resource除了使用了Zval的引用计数以外，还采用了一套独立自身的计数系统
<ul>
<li>zval中直接保存了zend_object对象的指针，统一并简化引用计数方案</li>
</ul>
</li>
</ul>
</li>
<li>
<p>编译优化</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.laruence.com/2015/06/19/3063.html">GCC PGO</a>，尝试分析PGO都做了些什么优化, 然后把一些通用的优化手工Apply到PHP7中</li>
<li>可通过产品场景训练GCC</li>
</ul>
</li>
<li>
<p>缓存优化</p>
<ul>
<li>默认的内存是以4KB分页的，而虚拟地址和内存地址是需要转换的， 而这个转换是要查表的，CPU为了加速这个查表过程都会内建TLB（Translation Lookaside Buffer）， 显而易见如果虚拟页越小，表里的条目数也就越多，而TLB大小是有限的，条目数越多TLB的Cache Miss也就会越高
<ul>
<li>如果我们能启用大内存页就能间接降低这个TLB Cache Miss，<a target="_blank" rel="noopener" href="https://www.laruence.com/2015/10/02/3069.html">新的Linux Kernel启用Hugepage可以达到这个目的</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.laruence.com/2015/12/04/3086.html">让PHP7达到最高性能的几个Tips</a></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="从-PHP-5-6-x-移植到-PHP-7-0-x"><a class="header-anchor" href="#从-PHP-5-6-x-移植到-PHP-7-0-x">¶</a>从 PHP 5.6.x 移植到 PHP 7.0.x</h1>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration70.php">更多细节可以阅读这里</a></p>
<h2 id="不向后兼容的变更"><a class="header-anchor" href="#不向后兼容的变更">¶</a>不向后兼容的变更</h2>
<ul>
<li>
<p>set_exception_handler() 不再保证收到的一定是 Exception 对象</p>
</li>
<li>
<p>当内部构造器失败的时候，总是抛出异常</p>
</li>
<li>
<p>解析错误会抛出 ParseError 异常。 对于 eval() 函数，需要将其包含到一个 catch 代码块中来处理解析错误。</p>
</li>
<li>
<p>原有的 E_STRICT 警告都被迁移到其他级别。 E_STRICT 常量会被保留，所以调用 error_reporting(E_ALL|E_STRICT) 不会引发错误。</p>
</li>
<li>
<p>对变量、属性和方法的间接调用现在将严格遵循从左到右的顺序来解析，而不是之前的混杂着几个特殊案例的情况。</p>
</li>
<li>
<p>关于list()处理方式的变更</p>
<ul>
<li>
<p>list() 现在会按照变量定义的顺序来给他们进行赋值，而非反过来的顺序。 通常来说，这只会影响list() 与数组的[]操作符一起使用的案例</p>
</li>
<li>
<p>list() 结构现在不再能是空的。</p>
</li>
<li>
<p>list() 不再能解开字符串（string）变量。 你可以使用str_split()来代替它。</p>
</li>
</ul>
</li>
<li>
<p>在 PHP 5中，在以引用方式传递函数参数时，使用冗余的括号对可以隐匿严格标准 的警告。现在，这个警告总会触发。</p>
</li>
<li>
<p>foreach发生了细微的变化，控制结构， 主要围绕阵列的内部数组指针和迭代处理的修改。</p>
<ul>
<li>
<p>在PHP7之前，当数组通过 foreach 迭代时，数组指针会移动。现在开始，不再如此</p>
</li>
<li>
<p>当默认使用通过值遍历数组时，foreach 实际操作的是数组的迭代副本，而非数组本身。这就意味着，foreach 中的操作不会修改原数组的值。</p>
</li>
<li>
<p>当使用引用遍历数组时，现在 foreach 在迭代中能更好的跟踪变化。</p>
</li>
<li>
<p>迭代一个非Traversable对象将会与迭代一个引用数组的行为相同。 这将导致在对象添加或删除属性时，foreach通过引用遍历时，有更好的迭代特性也能被应用</p>
</li>
</ul>
</li>
<li>
<p>Changes to integer handling</p>
<ul>
<li>
<p>在之前，一个八进制字符如果含有无效数字，该无效数字将被静默删节(0128 将被解析为 012). 现在这样的八进制字符将产生解析错误。</p>
</li>
<li>
<p>以负数形式进行的位移运算将会抛出一个 ArithmeticError</p>
</li>
<li>
<p>超出 integer 位宽的位移操作（无论哪个方向）将始终得到 0 作为结果。在从前，这一操作是结构依赖的。</p>
</li>
<li>
<p>之前的版本中，当 0 被做为除数时，无论是除数 (/) 或取模 (%) 操作，都会抛出一个 E_WARNING 错误并返回 false。现在，除法运算符 (/) 会返回一个由 IEEE 754 指定的浮点数：+INF, -INF 或 NAN。取模操作符 (%) 则会抛出一个 DivisionByZeroError 异常，并且不再产生 E_WARNING 错误。</p>
</li>
</ul>
</li>
<li>
<p>string处理上的调整</p>
<ul>
<li>
<p>十六进制字符串不再被认为是数字</p>
</li>
<li>
<p>由于新的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration70.new-features.php#migration70.new-features.unicode-codepoint-escape-syntax">Unicode codepoint escape syntax</a>语法， 紧连着无效序列并包含<code>\u{</code> 的字串可能引起致命错误。 为了避免这一报错，应该避免反斜杠开头。</p>
</li>
</ul>
</li>
<li>
<p>被移除的函数（Removed functions）</p>
<ul>
<li>
<p>这两个函数从PHP 4.1.0 开始被废弃，应该使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.call-user-func.php">call_user_func()</a> 和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.call-user-func-array.php">call_user_func_array()</a>。 你也可以考虑使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/functions.variable-functions.php">变量函数</a> 或者 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/functions.arguments.php#functions.variable-arg-list"><code>...</code></a> 操作符。</p>
</li>
<li>
<p>所有 <code>ereg</code> 系列函数被删掉了。 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.pcre.php">PCRE</a> 作为推荐的替代品。</p>
</li>
<li>
<p>已废弃的 <strong>mcrypt_generic_end()</strong> 函数已被移除，请使用<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mcrypt-generic-deinit.php">mcrypt_generic_deinit()</a>代替。</p>
</li>
<li>
<p>已废弃的 <strong>mcrypt_ecb()</strong>, <strong>mcrypt_cbc()</strong>, <strong>mcrypt_cfb()</strong> 和 <strong>mcrypt_ofb()</strong> 函数已被移除，请配合恰当的**<code>MCRYPT_MODE_*</code>** 常量来使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.mcrypt-decrypt.php">mcrypt_decrypt()</a>进行代替。</p>
</li>
<li>
<p>所有 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.mysql.php">ext/mysql</a> 函数已被删掉了。 如何选择不同的 MySQL API，详情请见 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/mysqlinfo.api.choosing.php">选择 MySQL API</a>。</p>
</li>
<li>
<p>所有 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration70.incompatible.php">ext/mssql</a> 函数已被移除。</p>
</li>
<li>
<p>已废弃的 <strong>datefmt_set_timezone_id()</strong> 和 <strong>IntlDateFormatter::setTimeZoneID()</strong> 函数已被移除，请使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/intldateformatter.settimezone.php">datefmt_set_timezone()</a> 与 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/intldateformatter.settimezone.php">IntlDateFormatter::setTimeZone()</a>代替。</p>
</li>
<li>
<p>移除了 <strong>set_magic_quotes_runtime()</strong> 和它的别名 <strong>magic_quotes_runtime()</strong>。 它们在 PHP 5.3.0 中已经被废弃， 并由于 PHP 5.4.0 移除魔术引号（Magic Quotes）而没有用处。</p>
</li>
<li>
<p>已废弃的 <strong>set_socket_blocking()</strong> 函数已被移除，请使用<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.stream-set-blocking.php">stream_set_blocking()</a>代替。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.dl.php">dl()</a>在 PHP-FPM 不再可用，在 CLI 和 embed SAPIs 中仍可用。</p>
</li>
<li>
<p>以下GD Type1函数被删除, 推荐使用 TrueType 字体和相关的函数作为替代。</p>
<ul>
<li><strong>imagepsbbox()</strong></li>
<li><strong>imagepsencodefont()</strong></li>
<li><strong>imagepsextendfont()</strong></li>
<li><strong>imagepsfreefont()</strong></li>
<li><strong>imagepsloadfont()</strong></li>
<li><strong>imagepsslantfont()</strong></li>
<li><strong>imagepstext()</strong></li>
</ul>
</li>
</ul>
</li>
<li>
<p>被移除掉的 INI 配置指令</p>
<ul>
<li>always_populate_raw_post_data</li>
<li>asp_tags</li>
<li><code>xsl.security_prefs</code> 指令被移除 在预处理的时候，取而代之的方法 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/xsltprocessor.setsecurityprefs.php">XsltProcessor::setSecurityPrefs()</a> 应该被调用到</li>
</ul>
</li>
<li>
<p>new 操作符创建的对象不能以引用方式赋值给变量</p>
</li>
<li>
<p>不能以下列名字来命名类、接口以及 trait：</p>
<ul>
<li>bool</li>
<li>int</li>
<li>float</li>
<li>string</li>
<li><strong><code>null</code></strong></li>
<li><strong><code>true</code></strong></li>
<li><strong><code>false</code></strong></li>
</ul>
</li>
<li>
<p>不建议以下列名字来命名类、接口以及 trait，在以后的迭代中，会作为保留关键字：</p>
<ul>
<li>resource</li>
<li>object</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed">mixed</a></li>
<li>numeric</li>
</ul>
</li>
<li>
<p>使用类似 ASP 的标签，以及 script 标签来区分 PHP 代码的方式被移除。</p>
</li>
<li>
<p>在不匹配的上下文中以静态方式调用非静态方法， <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/migration56.deprecated.php#migration56.deprecated.incompatible-context">在 PHP 5.6 中已经废弃</a>， 但是在 PHP 7.0 中， 会导致被调用方法中未定义 <code>$this</code> 变量，以及此行为已经废弃的警告。</p>
</li>
<li>
<p>在使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.generators.syntax.php#control-structures.yield">yield</a> 关键字的时候，不再需要括号， 并且它变更为右联接操作符，其运算符优先级介于 <code>print</code> 和 <code>=&gt;</code> 之间。 可以通过使用括号来消除歧义。</p>
</li>
<li>
<p>函数定义不可以包含多个同名参数</p>
</li>
<li>
<p>Switch 语句不可以包含多个 default 块</p>
</li>
<li>
<p>当在函数代码中使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.func-get-arg.php">func_get_arg()</a> 或 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.func-get-args.php">func_get_args()</a> 函数来检视参数值， 或者使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.debug-backtrace.php">debug_backtrace()</a> 函数查看回溯跟踪， 以及在异常回溯中所报告的参数值是指参数当前的值（有可能是已经被函数内的代码改变过的值）， 而不再是参数被传入函数时候的原始值了。</p>
</li>
<li>
<p>不再提供 $HTTP_RAW_POST_DATA 变量。 请使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.php.php#wrappers.php.input"><code>php://input</code></a> 作为替代。</p>
</li>
<li>
<p>在 INI 文件中，不再支持以 <code>#</code> 开始的注释行， 请使用 <code>;</code>（分号）来表示注释。</p>
</li>
<li>
<p>JSON 扩展已经被 JSOND 扩展取代。 对于数值的处理，有以下两点需要注意的： 第一，数值不能以点号（.）结束 （例如，数值 34. 必须写作 34.0 或 34）。 第二，如果使用科学计数法表示数值，e 前面必须不是点号（.） （例如，3.e3 必须写作 3.0e3 或 3e3）。 另外，空字符串不再被视作有效的 JSON 字符串。</p>
</li>
<li>
<p>在数值溢出的时候，内部函数将会失败，将浮点数转换为整数的时候，如果浮点数值太大，导致无法以整数表达的情况下， 在之前的版本中，内部函数会直接将整数截断，并不会引发错误。 在 PHP 7.0 中，如果发生这种情况，会引发 E_WARNING 错误，并且返回 null。</p>
</li>
<li>
<p>在自定义会话处理器中，如果函数的返回值不是 false，也不是 -1， 会引发致命错误。现在，如果这些函数的返回值不是布尔值，也不是 -1 或者 0，函数调用结果将被视为失败，并且引发 E_WARNING 错误。</p>
</li>
<li>
<p>由于内部排序算法进行了提升， 可能会导致对比时被视为相等的多个元素之间的顺序不稳定。</p>
</li>
<li>
<p>在循环或者 switch 语句之外使用 break 和 continue 被视为编译型错误（之前视为运行时错误），会引发 E_COMPILE_ERROR 错误。</p>
</li>
<li>
<p>Mhash 扩展已经被完全整合进 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/book.hash.php">Hash</a> 扩展了。 因此，不要再使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.extension-loaded.php">extension_loaded()</a> 函数来检测是否支持 MHash 扩展了， 建议使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.function-exists.php">function_exists()</a> 函数来进行检测。 另外，函数 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.get-loaded-extensions.php">get_loaded_extensions()</a> 以及相关的特性中，也不再报告 和 MHash 扩展相关的信息了。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/control-structures.declare.php#control-structures.declare.ticks">declare(ticks)</a> 指示符不再泄漏到不同的编译单元中。</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>PHP4 风格的构造函数（方法名和类名一样）将被弃用，并在将来移除。 如果在类中仅使用了 PHP4 风格的构造函数，PHP7 会产生 E_DEPRECATED 警告。 如果还定义了 __construct() 方法则不受影响。</p>
</li>
<li>
<p>废弃了 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.oop5.static.php">静态（Static）</a> 调用未声明成 <strong>static</strong> 的方法，未来可能会彻底移除该功能。</p>
</li>
<li>
<p>废弃了 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.password-hash.php">password_hash()</a> 函数中的盐值选项，阻止开发者生成自己的盐值（通常更不安全）。 开发者不传该值时，该函数自己会生成密码学安全的盐值。因此再无必要传入自己自定义的盐值。</p>
</li>
<li>
<p>废弃了 <code>capture_session_meta</code> 内的 SSL 上下文选项。 现在可以通过 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.stream-get-meta-data.php">stream_get_meta_data()</a> 获取 SSL 元数据（metadata）。</p>
</li>
<li>
<p>LDAP相关的以下函数已被废弃：</p>
<ul>
<li>ldap_sort()</li>
</ul>
</li>
<li>
<p>移除的扩展</p>
<ul>
<li>ereg</li>
<li>mssql</li>
<li>mysql</li>
<li>sybase_ct</li>
</ul>
</li>
<li>
<p>移除的 SAPI</p>
<ul>
<li>aolserver</li>
<li>apache</li>
<li>apache_hooks</li>
<li>apache2filter</li>
<li>caudium</li>
<li>continuity</li>
<li>isapi</li>
<li>milter</li>
<li>nsapi</li>
<li>phttpd</li>
<li>pi3web</li>
<li>roxen</li>
<li>thttpd</li>
<li>tux</li>
<li>webjames</li>
</ul>
</li>
</ul>
<h2 id="新特性"><a class="header-anchor" href="#新特性">¶</a>新特性</h2>
<ul>
<li>
<p>标量类型声明</p>
</li>
<li>
<p>返回值类型声明</p>
</li>
<li>
<p>由于日常使用中存在大量同时使用三元表达式和 isset()的情况， 我们添加了null合并运算符 (??) 这个语法糖。如果变量存在且值不为null， 它就会返回自身的值，否则返回它的第二个操作数。</p>
</li>
<li>
<p>太空船操作符用于比较两个表达式。当$a小于、等于或大于$b时它分别返回-1、0或1。 比较的原则是沿用 PHP 的<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/types.comparisons.php">常规比较规则</a>进行的。</p>
</li>
<li>
<p>通过 define() 定义常量数组</p>
</li>
<li>
<p>现在支持通过new class 来实例化一个匿名类，这可以用来替代一些“用后即焚”的完整类定义。</p>
</li>
<li>
<p>这接受一个以16进制形式的 Unicode codepoint，并打印出一个双引号或heredoc包围的 UTF-8 编码格式的字符串。 可以接受任何有效的 codepoint，并且开头的 0 是可以省略的。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/closure.call.php">Closure::call()</a> 现在有着更好的性能，简短干练的暂时绑定一个方法到对象上闭包并调用它。</p>
</li>
<li>
<p>为unserialize()提供过滤，这个特性旨在提供更安全的方式解包不可靠的数据。它通过白名单的方式来防止潜在的代码注入。</p>
</li>
<li>
<p>新增加的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/class.intlchar.php">IntlChar</a> 类旨在暴露出更多的 ICU 功能。这个类自身定义了许多静态方法用于操作多字符集的 unicode 字符。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.assert.php#function.assert.expectations">预期</a>是向后兼用并增强之前的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.assert.php">assert()</a> 的方法。 它使得在生产环境中启用断言为零成本，并且提供当断言失败时抛出特定异常的能力。</p>
</li>
<li>
<p>从同一 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.namespaces.definition.php"><code>namespace</code></a> 导入的类、函数和常量现在可以通过单个 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.namespaces.importing.php"><code>use</code></a> 语句 一次性导入了。</p>
</li>
<li>
<p>生成器可以返回表达式，此特性基于 PHP 5.5 版本中引入的生成器特性构建的。 它允许在生成器函数中通过使用 return 语法来返回一个表达式 （但是不允许返回引用值）， 可以通过调用 Generator::getReturn() 方法来获取生成器的返回值， 但是这个方法只能在生成器完成产生工作以后调用一次。</p>
</li>
<li>
<p>现在，只需在最外层生成其中使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.generators.syntax.php#control-structures.yield.from"><code>yield from</code></a>， 就可以把一个生成器自动委派给其他的生成器， <strong>Traversable</strong> 对象或者 array。</p>
</li>
<li>
<p>新加的函数 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.intdiv.php">intdiv()</a> 用来进行 整数的除法运算。</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.session-start.php">session_start()</a> 可以接受一个 array 作为参数， 用来覆盖 php.ini 文件中设置的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/session.configuration.php">会话配置选项</a>。</p>
</li>
<li>
<p>在 PHP 7 之前，当使用 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.preg-replace-callback.php">preg_replace_callback()</a> 函数的时候， 由于针对每个正则表达式都要执行回调函数，可能导致过多的分支代码。 而使用新加的 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.preg-replace-callback-array.php">preg_replace_callback_array()</a> 函数， 可以使得代码更加简洁。</p>
</li>
<li>
<p>新加入两个跨平台的函数： <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.random-bytes.php">random_bytes()</a> 和 <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/function.random-int.php">random_int()</a> 用来产生高安全级别的随机字符串和随机整数。</p>
</li>
<li>
<p>可以使用 list() 函数来展开实现了 ArrayAccess 接口的对象</p>
</li>
<li>
<p>允许在克隆表达式上访问对象成员，例如： (clone $foo)-&gt;bar()。</p>
</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2015/12/03/PHP-Version-7-0-0-Published/#more" rel="contents">
                阅读全文 »
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.tomhjx.top/2003/06/29/PHP-Version-5-0-0-Beta-1-Published/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="疯狂的茶几">
      <meta itemprop="description" content="懒人一个">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="疯狂的茶几">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2003/06/29/PHP-Version-5-0-0-Beta-1-Published/" class="post-title-link" itemprop="url">PHP Version 5.0.0 Beta 1 Published</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2003-06-29 15:00:00" itemprop="dateCreated datePublished" datetime="2003-06-29T15:00:00+08:00">2003-06-29</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2026-02-15 16:34:35" itemprop="dateModified" datetime="2026-02-15T16:34:35+08:00">2026-02-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="有什么变化"><a class="header-anchor" href="#有什么变化">¶</a>有什么变化</h1>
<p>它的核心是 Zend 引擎 2 代，引入了新的对象模型和大量新功能。</p>
<p><a target="_blank" rel="noopener" href="http://people.apache.org/~jim/ApacheCons/ApacheCon2002/pdf/suraski-php-02.pdf">http://people.apache.org/~jim/ApacheCons/ApacheCon2002/pdf/suraski-php-02.pdf</a></p>
<h2 id="新增了什么"><a class="header-anchor" href="#新增了什么">¶</a>新增了什么</h2>
<ul>
<li>
<p>New php.ini options:</p>
<ul>
<li>“session.hash_function” and “session.hash_bits_per_character”. (Sascha)</li>
<li>“mail.force_extra_paramaters”. (Derick)</li>
<li>“register_long_arrays”. (Zeev)</li>
</ul>
</li>
<li>
<p>Added new iconv functions. (Moriyoshi)</p>
<ul>
<li>iconv_strlen()</li>
<li>iconv_substr()</li>
<li>iconv_strpos()</li>
<li>iconv_strrpos()</li>
<li>iconv_mime_decode()</li>
<li>iconv_mime_encode()</li>
</ul>
</li>
<li>
<p>Added misc. new functions:</p>
<ul>
<li>ldap_sasl_bind(). (<a href="mailto:peter_c60@hotmail.com">peter_c60@hotmail.com</a>, Jani)</li>
<li>imap_getacl(). (Dan, Holger Burbach)</li>
<li>file_put_contents(). (Sterling)</li>
<li>proc_nice() - Changes priority of the current process. (Ilia)</li>
<li>pcntl_getpriority() and pcntl_setpriority(). (Ilia)</li>
<li>idate(), date_sunrise() and date_sunset(). (Moshe Doron)</li>
<li>strpbrk() - Searches a string for a list of characters. (Ilia)</li>
<li>get_headers() - Returns headers sent by the server of the specified URL. (Ilia)</li>
<li>str_split() - Breaks down a string into an array of elements based on length. (Ilia)</li>
<li>array_walk_recursive(). (Ilia)</li>
<li>array_combine(). (Andrey)</li>
</ul>
</li>
<li>
<p>Added optional parameter to get_browser() to make it return an array. (Jay)</p>
</li>
<li>
<p>Added optional parameter to openssl_sign() to specify the hashing algorithm.(<a href="mailto:scott@planetscott.ca">scott@planetscott.ca</a>, Derick)</p>
</li>
<li>
<p>Added optional parameter to sha1(), sha1_file(), md5() and md5_file() which makes them return the digest as binary data. (Michael Bretterklieber, Derick)</p>
</li>
<li>
<p>Added optional parameter to mkdir() to make directory creation recursive. (Ilia)</p>
</li>
<li>
<p>Added optional parameter to file() which makes the result array not contain the line endings and to skip empty lines. (Ilia)</p>
</li>
<li>
<p>Added new range() functionality:</p>
<ul>
<li>Support for float modifier. (Ilia)</li>
<li>Detection of numeric values inside strings passed as high &amp; low. (Ilia)</li>
<li>Proper handle the situations where high == low. (Ilia)</li>
<li>Added an optional step parameter. (Jon)</li>
</ul>
</li>
<li>
<p>Added encoding detection feature for expat XML parser. (Adam Dickmeiss, Moriyoshi)</p>
</li>
<li>
<p>Added missing multibyte (unicode) support and numeric entity support to html_entity_decode(). (Moriyoshi)</p>
</li>
<li>
<p>Added IPv6 support to ext/sockets. (Sara)</p>
</li>
<li>
<p>Added input filter support. See README.input_filter for more info. (Rasmus)</p>
</li>
<li>
<p>Added a replace count for str_[i]replace(), see <a target="_blank" rel="noopener" href="http://bugs.php.net/8218">#8218</a>. (Sara)</p>
</li>
</ul>
<h2 id="移除了什么"><a class="header-anchor" href="#移除了什么">¶</a>移除了什么</h2>
<ul>
<li>Removed the bundled MySQL client library. (Sterling)</li>
</ul>
<h2 id="修改了什么"><a class="header-anchor" href="#修改了什么">¶</a>修改了什么</h2>
<ul>
<li>
<p>Switch to using Zend Engine 2, which includes numerous engine level improvements. A full overview may be downloaded from <a target="_blank" rel="noopener" href="http://www.zend.com/engine2/ZendEngine-2.0.pdf">http://www.zend.com/engine2/ZendEngine-2.0.pdf</a> (PDF).</p>
</li>
<li>
<p>The SQLite (<a target="_blank" rel="noopener" href="http://www.hwaci.com/sw/sqlite/">http://www.hwaci.com/sw/sqlite/</a>) extension is now bundled and enabled by default. (Wez, Marcus, Tal)</p>
</li>
<li>
<p>Improved the speed of internal functions that use callbacks by 40% due to a new internal fast_call_user_function() function. (Sterling)</p>
</li>
<li>
<p>Completely Overhauled XML support (Rob, Sterling, Chregu, Marcus)</p>
<ul>
<li>Brand new Simplexml extension</li>
<li>New DOM extension</li>
<li>New XSL extension</li>
<li>Moved the old DOM-XML and XSLT extensions to PECL</li>
<li>ext/xml can now use both libxml2 and expat to parse XML</li>
<li>Removed bundled expat</li>
</ul>
</li>
<li>
<p>Improved the streams support: (Wez, Sara, Ilia)</p>
<ul>
<li>Improved performance of readfile(), fpassthru() and some internal streams operations under Win32.</li>
<li>stream_socket_client() - similar to fsockopen(), but more powerful.</li>
<li>stream_socket_server() - Creates a server socket.</li>
<li>stream_socket_accept() - Accept a client connection.</li>
<li>stream_socket_get_name() - Get local or remote name of socket.</li>
<li>stream_copy_to_stream()</li>
<li>stream_get_line() - Reads either the specified number of bytes or until the ending string is found.</li>
<li>Added context property to userspace streams object.</li>
<li>Added generic crypto interface for streams (supports dynamic loading of OpenSSL)</li>
<li>Added lightweight streaming input abstraction to the Zend Engine scanners to provide uniform support for include()'ing data from PHP streams across all platforms.</li>
<li>Added ‘string.base64’ stream filter.</li>
<li>Renamed stream_register_wrapper() to stream_wrapper_register().</li>
<li>Added “ftp://” wrapper support to opendir(), stat() and unlink().</li>
<li>Added context options ‘method’, ‘header’ and ‘content’ for “http://” fopen wrapper.</li>
</ul>
</li>
<li>
<p>Improved the GD extension: (Pierre-Alain Joye, Ilia)</p>
<ul>
<li>imagefilter() - Apply different filters to image. (Only available with bundled GD library)</li>
<li>Antialiased drawing support:
<ul>
<li>imageantialias() - (de)active antialias</li>
<li>imageline() and imagepolygon() antialias support</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Changed the length parameter in fgetss() to be optional. (Moriyoshi)</p>
</li>
<li>
<p>Changed ini parser to allow for handling of quoted multi-line values. (Ilia)</p>
</li>
<li>
<p>Changed get_extension_funcs() to return list of the built-in Zend Engine functions if “zend” is specified as the module name. (Ilia)</p>
</li>
<li>
<p>Changed array_search() to accept also objects as a needle. (Moriyoshi)</p>
</li>
<li>
<p>Changed ext/mcrypt to require libmcrypt version 2.5.6 or greater. (Derick)</p>
</li>
<li>
<p>Changed uniqid() parameters to be optional and allow any prefix length. (Marcus)</p>
</li>
</ul>
<h2 id="修复了什么BUG"><a class="header-anchor" href="#修复了什么BUG">¶</a>修复了什么BUG</h2>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2003/06/29/PHP-Version-5-0-0-Beta-1-Published/#more" rel="contents">
                阅读全文 »
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.tomhjx.top/1999/11/16/PHP-Version-4-0-Beta-3-Published/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="疯狂的茶几">
      <meta itemprop="description" content="懒人一个">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="疯狂的茶几">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1999/11/16/PHP-Version-4-0-Beta-3-Published/" class="post-title-link" itemprop="url">PHP Version 4.0 Beta 3 Published</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：1999-11-16 15:00:00" itemprop="dateCreated datePublished" datetime="1999-11-16T15:00:00+08:00">1999-11-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2026-02-15 16:34:35" itemprop="dateModified" datetime="2026-02-15T16:34:35+08:00">2026-02-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>9 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="有什么变化"><a class="header-anchor" href="#有什么变化">¶</a>有什么变化</h1>
<h2 id="新增了什么"><a class="header-anchor" href="#新增了什么">¶</a>新增了什么</h2>
<ul>
<li>
<p>Added Win32 build files for Informix driver and make it compile with ZTS (danny)</p>
</li>
<li>
<p>Added tmpfile() function (Stig)</p>
</li>
<li>
<p>min(),max(),a[r]sort(),[r]sort(),k[r]sort() now work consistent with the language-core. (Thies)</p>
</li>
<li>
<p>tempnam() now uses mkstemp() if available (Stig)</p>
</li>
<li>
<p>serialize() and var_dump() now honor the precision as set in php.ini for doubles. (Thies)</p>
</li>
<li>
<p>Added Microsoft SQL Server module for Win32 (Frank)</p>
</li>
<li>
<p>Added support for forcing a variable number of internal function arguments by reference. (Andi &amp; Zeev, Zend Engine)</p>
</li>
<li>
<p>Implemented getprotoby{name,number} (Evan)</p>
</li>
<li>
<p>Added array_pad() function. (Andrei)</p>
</li>
<li>
<p>Added new getservby{name,port} functions. (Evan)</p>
</li>
<li>
<p>Added session.cookie_path and session.cookie_domain (Sascha)</p>
</li>
<li>
<p>Continue processing PHP_INI_SYSTEM knownDirectives after extension= (Sam Ruby)</p>
</li>
<li>
<p>Enable IBM DB2 support - Tested against DB2 6.1 UDB on Linux (Rasmus)</p>
</li>
<li>
<p>Added new str_repeat() function. (Andrei)</p>
</li>
<li>
<p>implemented OCI8 $lob-&gt;WriteToFile() function - very useful for streaming large amounts of LOB-Data without to need of a huge buffer. (Thies)</p>
</li>
<li>
<p>Added session.use_cookies option (Sascha)</p>
</li>
<li>
<p>Added getcwd() function. (Thies)</p>
</li>
<li>
<p>added === operator support. (Andi &amp; Thies, Zend Engine)</p>
</li>
<li>
<p>Added is_resource(), is_bool() functions. (Thies)</p>
</li>
<li>
<p>Thies introduced ZEND_FETCH_RESOURCE2 (Danny).</p>
</li>
<li>
<p>Added Informix driver to list of maintained extensions. (Danny).</p>
</li>
<li>
<p>IXF_LIBDIR environment variable specifies alternate Informix library path for configure (Danny).</p>
</li>
<li>
<p>You can use resources as array-indices again (Thies, Zend Engine)</p>
</li>
<li>
<p>fdf support ported; not completely tested with latest version 4.0 for glibc (Uwe)</p>
</li>
<li>
<p>OCI8 connections are now kept open as long as they are referenced (Thies)</p>
</li>
<li>
<p>Ported range() and shuffle() from PHP 3 to PHP 4 (Andrei)</p>
</li>
<li>
<p>Added the ability to use variable references in the array() construct. For example, array(“foo” =&gt; &amp;$foo). (Andi, Zend Engine)</p>
</li>
<li>
<p>Added array_reverse() function (Andrei)</p>
</li>
<li>
<p>Generalized server-API build procedure on UNIX (Stig)</p>
</li>
<li>
<p>Added ‘–disable-rpath’ option (Sascha)</p>
</li>
<li>
<p>Added AOLserver SAPI module (Sascha)</p>
</li>
<li>
<p>Added support for the Easysoft ODBC-ODCB Bridge (<a href="mailto:martin@easysoft.com">martin@easysoft.com</a>)</p>
</li>
<li>
<p>Added extra metadata functions to ODBC, SQLTables etc (<a href="mailto:nick@easysoft.com">nick@easysoft.com</a>)</p>
</li>
<li>
<p>Implemented object serialization/deserialization in WDDX (Andrei)</p>
</li>
<li>
<p>Added krsort() function (Thies)</p>
</li>
<li>
<p>Added func_num_args(), func_get_arg() and func_get_args() for standard access to variable number of arguments functions (Zeev)</p>
</li>
<li>
<p>Added FTP support (Andrew Skalski)</p>
</li>
<li>
<p>Added optional allowable_tags arguments to strip_tags(), gzgetss() and fgetss() to allow you to specify a string of tags that are not to be stripped (Rasmus)</p>
</li>
<li>
<p>Added array_count_values() function. (Thies)</p>
</li>
<li>
<p>snmp, pgsql, mysql and gd modules can be built as dynamically loaded modules (Greg)</p>
</li>
<li>
<p>Added user-level callbacks for session module (Sascha)</p>
</li>
<li>
<p>Added support for unknown POST content types (Zeev)</p>
</li>
<li>
<p>Added “wddx” serialization handler for session module (Sascha) (automatically enabled, if you compile with --with-wddx)</p>
</li>
<li>
<p>PHP 4.0 now serializes Objects as ‘O’ (not understood by PHP 3.0), but unserializes PHP 3.0 serialized objects as expected. (Thies)</p>
</li>
<li>
<p>Made serialize/unserialize work on classes. If the class is known at unserialize() time, you’ll get back a fully working object! (Thies)</p>
</li>
<li>
<p>Made it possible to specify external location of PCRE library (Andrei)</p>
</li>
<li>
<p>OCI8 supports appending and positioning when saving LOBs (Thies)</p>
</li>
<li>
<p>Added metaphone support (Thies)</p>
</li>
<li>
<p>OCI8 Driver now supports LOBs like PHP 3.0. (Thies)</p>
</li>
<li>
<p>var_dump now dumps the properties of an object (Thies)</p>
</li>
<li>
<p>Added support for transparent session id propagation (Sascha)</p>
</li>
<li>
<p>Made WDDX serialize object properties properly (Andrei)</p>
</li>
<li>
<p>Added session_unset() function (Andrei)</p>
</li>
<li>
<p>Added gpc_globals variable directive to php.ini. By default it is On, but if it is set to Off, GET, POST and Cookie variables will not be inserted to the global scope. Mostly makes sense when coupled with track_vars (Zeev)</p>
</li>
<li>
<p>Added versioning support for shared library (Sascha) This allows concurrent use of PHP 3.0 and PHP 4.0 as Apache modules. See the end of the INSTALL file for more information.</p>
</li>
<li>
<p>Added second parameter to array_keys which specifies search value for which the key should be returned (Andrei)</p>
</li>
<li>
<p>Make set_time_limit() work on Unix (Rasmus)</p>
</li>
<li>
<p>Added connection handling support (Rasmus)</p>
</li>
<li>
<p>Added shared memory module for session data storage (Sascha)</p>
</li>
<li>
<p>Ported newest GetImageSize (Thies)</p>
</li>
<li>
<p>Added session compile support in Win32 (Andi)</p>
</li>
<li>
<p>Added -d switch to the CGI binary that allows overriding php.ini values from the command line (Zeev)</p>
</li>
<li>
<p>Added output_buffering directive to php.ini, to enable output buffering for all PHP scripts - default is off (Zeev).</p>
</li>
<li>
<p>Added session.extern_referer_chk which checks whether session ids were referred to by an external site and eliminates them (Sascha)</p>
</li>
<li>
<p>Introduced general combined linear congruential generator (Sascha)</p>
</li>
<li>
<p>Made ldap_close back into an alias for ldap_unbind (Andrei)</p>
</li>
</ul>
<h2 id="移除了什么"><a class="header-anchor" href="#移除了什么">¶</a>移除了什么</h2>
<ul>
<li>Cleaned up File-Module (Thies)</li>
<li>Cleaned up Directory-Module (Thies)</li>
</ul>
<h2 id="修改了什么"><a class="header-anchor" href="#修改了什么">¶</a>修改了什么</h2>
<ul>
<li>
<p>ucfirst()/ucwords() no longer modify arg1 (Thies)</p>
</li>
<li>
<p>Upgraded regex library to alpha3.8 (Sascha)</p>
</li>
<li>
<p>Output-Buffering system is now Thread-Safe. (Thies)</p>
</li>
<li>
<p>XML_Parse_Into_Struct no longer eats data. (Thies)</p>
</li>
<li>
<p>unserialize() now gives a notice when passed invalid data. (Thies)</p>
</li>
<li>
<p>Improved the Win32 COM module to support [out] parameters (Boris Wedl)</p>
</li>
<li>
<p>setlocale doesn’t anymore screw up things if you forgot to change it back to the original settings. (Jouni)</p>
</li>
<li>
<p>Switched to new system where ChangeLog is automagically updated from commit messages. NEWS file is now the place for public announcements. (Andrei)</p>
</li>
<li>
<p>Improved UNIX build system. Now utilizes libtool (Sascha)</p>
</li>
<li>
<p>Updated Zend garbage collection with a much more thorough method. (Andi, Zend Engine)</p>
</li>
<li>
<p>Some more XML fixes/cleanups (Thies)</p>
</li>
<li>
<p>Updated preg_replace() so that if any argument passed in is an array it will make a copy of each entry before converting it to string so that the original is intact. If the subject is an array then it will preserve the keys in the output as well (Andrei)</p>
</li>
<li>
<p>Configure speedup (Stig)</p>
</li>
<li>
<p>Upgrade some more internal functions to use new Zend function API. (Thies, Zend Engine)</p>
</li>
<li>
<p>Informix driver : Changed <a target="_blank" rel="noopener" href="http://ifx.ec">ifx.ec</a> to use the new high-performance ZEND API. (Danny)</p>
</li>
<li>
<p>Upgraded math-funtions to use new Zend function API (Thies)</p>
</li>
<li>
<p>Upgraded a lot internal functions to use new Zend function API (Thies)</p>
</li>
<li>
<p>Updated OCI8 to use the new high-performance Zend function API. (Thies)</p>
</li>
<li>
<p>Updated ODBC to use the new high-performance Zend function API (kara)</p>
</li>
<li>
<p>Updated zlib to use the new high-performance Zend function API. (Stefan)</p>
</li>
<li>
<p>Updated preg_split() to allow returning only non-empty pieces (Andrei)</p>
</li>
<li>
<p>Updated PCRE to use the new high-performance Zend function API (Andrei)<br>
8 Updated session, dba, mhash, mcrypt, sysvshm, sysvsem, gettext modules to use the new high-performance Zend function API (Sascha)</p>
</li>
<li>
<p>Updated WDDX to use the new high-performance Zend function API (Andrei)</p>
</li>
<li>
<p>Updated XML to use the new high-performance Zend function API. (Thies)</p>
</li>
<li>
<p>Updated Oracle to use the new high-performance Zend function API. (Thies)</p>
</li>
<li>
<p>Improved the performance of the MySQL module significantly by using the new high-performance Zend function API. (Zeev)</p>
</li>
<li>
<p>Extended var_dump to handle resource type somewhat (Andrei)</p>
</li>
<li>
<p>Resourcified Oracle (Thies)</p>
</li>
<li>
<p>Upgraded var_dump() to take multiple arguments (Andrei)</p>
</li>
<li>
<p>Reworked preg_* functions according to the new PCRE API, which also made them behave much more like Perl ones (Andrei)</p>
</li>
<li>
<p>Updated bundled PCRE library to version 2.08 (Andrei)</p>
</li>
<li>
<p>count()/is_array/is_object… speedups. (Thies)</p>
</li>
<li>
<p>OCI8 doesn’t use define callbacks any longer. (Thies)</p>
</li>
<li>
<p>Rewrote the GET/POST/Cookie data reader to support multi-dimensional arrays! (Zeev)</p>
</li>
<li>
<p>Renamed allow_builtin_links to expose_php (defaults to On). This directive tells PHP whether it may expose its existence to the outside world, e.g. by adding itself to the Web server header (Zeev)</p>
</li>
<li>
<p>Resourcified Informix driver (Danny)</p>
</li>
<li>
<p>New resource handling for odbc, renamed to php_odbc.[ch]</p>
</li>
<li>
<p>Improved the Sybase-CT module to make use of resources (Zeev)</p>
</li>
<li>
<p>Improved the mSQL module to make use of resources (Zeev)</p>
</li>
<li>
<p>Changed mysql_query() and mysql_db_query() to return false in case of saving the result set data fails (Zeev)</p>
</li>
<li>
<p>Improved the resource mechanism - resources were not getting freed as soon as they could (Zeev)</p>
</li>
<li>
<p>Improved session id generation (Sascha)</p>
</li>
<li>
<p>Improved speed of uniqid() by using the combined LCG and removing the extra usleep() (Sascha)</p>
</li>
<li>
<p>OciFetchInto now resets the returned array in all cases (Thies)</p>
</li>
<li>
<p>Oracle is now ZTS-Safe (Thies)</p>
</li>
<li>
<p>OCI8 is now ZTS-Safe (Thies)</p>
</li>
<li>
<p>Imported PHP 3.0 diskfreespace() function (Thies)</p>
</li>
</ul>
<h2 id="修复了什么BUG"><a class="header-anchor" href="#修复了什么BUG">¶</a>修复了什么BUG</h2>
<ul>
<li>
<p>Fixed strtr() not to modify arg1 (Thies)</p>
</li>
<li>
<p>Fixed selecting nested-tables in OCI8. (Thies)</p>
</li>
<li>
<p>RFC-854 fix for internal FTP-Code. Commands have to end in “\r\n” (Thies)</p>
</li>
<li>
<p>Fixed OpenLink ODBC support (Stig)</p>
</li>
<li>
<p>Fixed garbage returned at the end of certain Sybase-Columns (Thies) Patch submitted by: <a href="mailto:neal@wanlink.com">neal@wanlink.com</a></p>
</li>
<li>
<p>Fixed parse_url(‘-’) crash. (Thies)</p>
</li>
<li>
<p>Fixed shuffle() so that it no longer breaks on Solaris. (Andrei)</p>
</li>
<li>
<p>Fixed zombie problem in shell_exec() and $a = `some_command` constructs. (Thies)</p>
</li>
<li>
<p>Fixed gmmktime() so that the following should always be true: gmmktime([args]) == mktime([args]) + date(‘Z’, mktime([args])) (Jouni)</p>
</li>
<li>
<p>Fixed refcount problem in XML module. (Thies)</p>
</li>
<li>
<p>Fixed crash in HTTP_RAW_POST_DATA handling (Thies)</p>
</li>
<li>
<p>Fixed pg_fetch_array() with three arguments (Sascha) Patch submitted by: <a href="mailto:brian@soda.berkeley.edu">brian@soda.berkeley.edu</a></p>
</li>
<li>
<p>Small fix in Ora_Close (Thies)</p>
</li>
<li>
<p>Fixed header(“HTTP/…”); behaviour (Sascha)</p>
</li>
<li>
<p>Fixed backwards incompatibility with ereg() (Thies)</p>
</li>
<li>
<p>Fixed LOB/Persistent-Connection related OCI8-Crash (Thies)</p>
</li>
<li>
<p>Fixed XML Callbacks. (Thies)</p>
</li>
<li>
<p>Fixed bug in odbc_setoption, getParameter call incorrect (<a href="mailto:martin@easysoft.com">martin@easysoft.com</a>)</p>
</li>
<li>
<p>Fixed NULL-Column problem in Oracle-Driver (Thies)</p>
</li>
<li>
<p>Fixed SEGV in mcal make_event_object() and typo in mcal_list_alarms() (Andrew Skalski)</p>
</li>
<li>
<p>Fixed Ora_PLogon (Thies)</p>
</li>
<li>
<p>Fixed a memory leak in the Apache per-directory directives handler (Zeev)</p>
</li>
<li>
<p>OCI8 fix for fetching empty LOBs (Thies)</p>
</li>
<li>
<p>Fixed unserializing objects (Thies)</p>
</li>
<li>
<p>Fixed WDDX mem leak when undefined variable is passed in for serialization (Andrei)</p>
</li>
<li>
<p>Fixed double session globals shutdown crash (Andrei)</p>
</li>
<li>
<p>Fixed crash related to ignore_user_abort ini entry (Andrei)</p>
</li>
<li>
<p>Fixed session.auto_start (Sascha)</p>
</li>
<li>
<p>Fixed several problems with output buffering and HEAD requests (Zeev)</p>
</li>
<li>
<p>Fixed HTTP Status code issue with ISAPI module (Zeev)</p>
</li>
<li>
<p>Fixed a problem that prevented $GLOBALS from working properly (Zeev, Zend library)</p>
</li>
<li>
<p>Fixed a crash that would occur if wddx_deserialize did not receive a valid packet (Andrei)</p>
</li>
<li>
<p>Fixed a bugglet when redefining a class at run-time (Andi, Zend Engine)</p>
</li>
<li>
<p>Fixed sem_get() on AIX (Sascha)</p>
</li>
<li>
<p>Fixed fopen() to work with URL’s in Win32 (Andi &amp; Zeev)</p>
</li>
<li>
<p>Fixed include_path for Win32 (Andi, Zend Engine)</p>
</li>
<li>
<p>Fixed bug in ISAPI header sending function (Charles)</p>
</li>
<li>
<p>Fixed memory leak when using undefined values (Andi &amp; Zeev, Zend Engine)</p>
</li>
<li>
<p>Fixed some more class inheritance issues (Zeev, Zend Engine)</p>
</li>
<li>
<p>Fixed Apache build wrt to shared modules on FreeBSD/Linux (Sascha)</p>
</li>
<li>
<p>Fixed mysql_errno() to work with recent versions of MySQL (Zeev)</p>
</li>
<li>
<p>Fixed a problem with define() and boolean values (Zeev)</p>
</li>
<li>
<p>Fixed inclusion of gd/freetype functions (Sascha)</p>
</li>
<li>
<p>Fixed persistency of MHASH_* constants (Sascha)</p>
</li>
<li>
<p>Fixed flushing of cached information to disk in DBA’s DB2 module (Sascha)</p>
</li>
<li>
<p>Fixed is_writeable/is_writable problem; they are both defined now (Andrei)</p>
</li>
<li>
<p>Fixed thread-safety issues in the MySQL module (Zeev)</p>
</li>
<li>
<p>Fixed thread-safe support for dynamic modules (Zeev)</p>
</li>
<li>
<p>Fixed Sybase CT build process (Zeev)</p>
</li>
</ul>
<h1 id="为了解决什么问题"><a class="header-anchor" href="#为了解决什么问题">¶</a>为了解决什么问题</h1>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1999/11/16/PHP-Version-4-0-Beta-3-Published/#more" rel="contents">
                阅读全文 »
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://www.tomhjx.top/1999/08/09/PHP-Version-4-0-Beta-2-Published/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="疯狂的茶几">
      <meta itemprop="description" content="懒人一个">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="疯狂的茶几">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1999/08/09/PHP-Version-4-0-Beta-2-Published/" class="post-title-link" itemprop="url">PHP Version 4.0 Beta 2 Published</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：1999-08-09 15:00:00" itemprop="dateCreated datePublished" datetime="1999-08-09T15:00:00+08:00">1999-08-09</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2026-02-15 16:34:35" itemprop="dateModified" datetime="2026-02-15T16:34:35+08:00">2026-02-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
          ，
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 ≈</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="有什么变化"><a class="header-anchor" href="#有什么变化">¶</a>有什么变化</h1>
<h2 id="新增了什么"><a class="header-anchor" href="#新增了什么">¶</a>新增了什么</h2>
<ul>
<li>Made the IMAP module work with PHP 4.0 (Zeev)</li>
<li>Added get_class($obj), get_parent_class($obj) and method_exists($obj,“name”) (Andi &amp; Zeev)</li>
<li>Added function entries for strip_tags() and similar_text() (Andrei)</li>
<li>Ported strtotime() function from PHP 3.0 (Andrei)</li>
<li>buildconf now checks your installation (Stig)</li>
<li>XML module now built dynamically with --with-xml=shared (Stig)</li>
<li>Added a check for freetype.h - fixed build on RedHat 6.0 (Zeev)</li>
<li>Ported all remaining date() format options from PHP 3.0 (Andrei)</li>
<li>$php_errormsg now works (Andrei)</li>
<li>Added locale support for Perl Compatible Regexp functions (Andrei)</li>
<li>Informix module ported (Danny)</li>
<li>Added patch for reverse lookup table in base64_decode (Sascha) Submitted by <a href="mailto:bfranklin@dct.com">bfranklin@dct.com</a></li>
<li>Added DBA module (Sascha)</li>
<li>Added session id detection within REQUEST_URI (Sascha)</li>
<li>Added missing E_ error level constants (Zeev, Zend Engine)</li>
<li>Gave PHP 4.0’s SNMP extension all the functionality of PHP 3.0.12 (SteveL)</li>
</ul>
<h2 id="移除了什么"><a class="header-anchor" href="#移除了什么">¶</a>移除了什么</h2>
<ul>
<li>Remove --with-shared-apache (Sascha)</li>
</ul>
<h2 id="修改了什么"><a class="header-anchor" href="#修改了什么">¶</a>修改了什么</h2>
<ul>
<li>
<p>Win32 builds now include the ODBC module built-in (Zeev)</p>
</li>
<li>
<p>Updated hyperwave module, made it thread safe</p>
</li>
<li>
<p>Updated pdflib module, version 0.6 of pdflib no longer supported</p>
</li>
<li>
<p>Updated fdf module</p>
</li>
<li>
<p>Built-in phpinfo() links are now turned off by default. They can be turned on using the allow_builtin_links INI directive (Zeev)</p>
</li>
<li>
<p>Changed phpinfo() to list modules that have no info function (Zeev)</p>
</li>
<li>
<p>Modified array_walk() function so that the userland callback is passed a key and possible user data in addition to the value (Andrei)</p>
</li>
<li>
<p>Children now inherit their parent’s constructor, if they do not supply a constructor of their own.</p>
</li>
<li>
<p>Apache php_flag values only recognized ‘On’ (case sensitive) - changed to case insensitive (Zeev)</p>
</li>
<li>
<p>Merged in gdttf stuff from PHP 3.0 (Sascha)</p>
</li>
<li>
<p>Merged in PHP 3.0 version of str_replace (Sascha)</p>
</li>
<li>
<p>Merged in HP-UX/ANSI compatibility switch from PHP 3.0 (Sascha)</p>
</li>
<li>
<p>Improved register_shutdown_function() - you may now supply arguments that will be passed to the shutdown function (Zeev)</p>
</li>
<li>
<p>Improved call_user_func() and call_user_method() - they now support passing arguments by reference (Zeev)</p>
</li>
<li>
<p>Improved ISAPI module to supprt large server variables (Zeev)</p>
</li>
</ul>
<h2 id="修复了什么BUG"><a class="header-anchor" href="#修复了什么BUG">¶</a>修复了什么BUG</h2>
<ul>
<li>Fixed a problem when sending HTTP/1.x header lines using header() (Zeev)</li>
<li>Fixed SYSV-SHM interface (Thies).</li>
<li>Fixed ldap_search(), ldap_read() and ldap_list() (Zeev)</li>
<li>Fixed Apache information in phpinfo() (<a href="mailto:sam@breakfree.com">sam@breakfree.com</a>)</li>
<li>Fixed usort() and uksort() (Zeev)</li>
<li>Fixed md5() in the Apache module (Thies)</li>
<li>Fixed sybase_fetch_object() (Zeev)</li>
<li>Fixed a problem with include()/require() of URLs (Sascha, Zeev)</li>
<li>Fixed a bug in implode() that caused it to corrupt its arguments (Zeev)</li>
<li>Fixed various inheritance problems (Andi &amp; Zeev, Zend Engine)</li>
<li>Fixed runtime inheritance of classes (parent methods/properties were overriding their children) (Zeev, Zend Engine)</li>
<li>Fixed backwards incompatibility with the “new” operator (Andi, Zend Engine)</li>
<li>Fixed bugs in uksort() and ksort() sort ordering (Andrei)</li>
<li>Fixed a memory leak when using assignment-op operators with lvalue of type string (Zeev, Zend Engine)</li>
<li>Fixed a problem in inheritance from classes that are defined in include()d files (Zeev, Zend Engine)</li>
<li>Fixed a problem with the PHP error handler that could result in a crash on certain operating systems (Zeev)</li>
<li>Fixed a memory leak with switch statement containing return statements (Andi &amp; Zeev, Zend Engine)</li>
<li>Fixed a crash problem in switch statements that had a string offset as a conditional (Andi &amp; Zeev, Zend Engine)</li>
<li>Imported PHP 3.0 fixes for problem with PHP as a dynamic module and Redhat libc2.1 in zlib module (Stefan)</li>
<li>Imported PHP 3.0 fixes for rand() and mt_rand() (Rasmus)</li>
<li>Fixed a bug in WDDX that would cause a crash if a number was passed in instead of a variable name (Andrei)</li>
<li>Fixed array_walk() to work in PHP 4.0 (Andrei)</li>
<li>Fixed rpath handling for utilitites built during Apache build (Sascha)</li>
<li>Fixed a bug in sending multiple HTTP Cookies under Apache (Zeev)</li>
<li>Fixed implicit connect on the MySQL, mSQL, PostgreSQL and Sybase modules (Zeev)</li>
</ul>
<h1 id="为了解决什么问题"><a class="header-anchor" href="#为了解决什么问题">¶</a>为了解决什么问题</h1>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1999/08/09/PHP-Version-4-0-Beta-2-Published/#more" rel="contents">
                阅读全文 »
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  © 
  <span itemprop="copyrightYear">2026</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">疯狂的茶几</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">162k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:27</span>
  </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>


  



  
  


  







<script src="/bundle.js"></script><script>{"enable":true,"theme":"forest","js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.11.2/dist/mermaid.min.js","integrity":"sha256-lBK8/r0PCT3qtPtIvDcaT+20nHioFbzRGg36kOJ+wz4="}}</script></body></html>